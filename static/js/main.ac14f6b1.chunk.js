(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports=n.p+"static/media/Data2.1104e430.svg"},108:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},163:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},166:function(e,t,n){e.exports=n.p+"static/media/Publication.b630024c.svg"},167:function(e,t,n){e.exports=n.p+"static/media/study-active.bc52e72b.svg"},168:function(e,t,n){e.exports=n.p+"static/media/study.79d24d74.svg"},169:function(e,t,n){e.exports=n.p+"static/media/study-complete.b012f80b.svg"},170:function(e,t,n){e.exports=n.p+"static/media/DNA_Two.d8f80972.svg"},171:function(e,t,n){e.exports=n.p+"static/media/ToolClinical.ca6b9056.svg"},172:function(e,t,n){e.exports=n.p+"static/media/ToolComputational.b3b0a1a1.svg"},173:function(e,t,n){e.exports=n.p+"static/media/ToolExperimental.30e19c72.svg"},174:function(e,t,n){e.exports=n.p+"static/media/ctf.4eb55044.svg"},175:function(e,t,n){e.exports=n.p+"static/media/dhart.e554b25a.svg"},176:function(e,t,n){e.exports=n.p+"static/media/ntap.e9543055.svg"},177:function(e,t,n){e.exports=n.p+"static/media/amp-icon-header.71a5e101.svg"},178:function(e,t,n){e.exports=n.p+"static/media/amp-icon.3593ecd7.svg"},179:function(e,t,n){e.exports=n.p+"static/media/move-icon-header.dd07eaeb.svg"},180:function(e,t,n){e.exports=n.p+"static/media/move-icon.2f85f6de.svg"},181:function(e,t,n){e.exports=n.p+"static/media/ModelAD-icon-header.d2e9fd8e.svg"},182:function(e,t,n){e.exports=n.p+"static/media/ModelAD-icon.e37944bf.svg"},183:function(e,t,n){e.exports=n.p+"static/media/resilience-icon-header.595fa5fa.svg"},184:function(e,t,n){e.exports=n.p+"static/media/resilience-icon.b1a30ae3.svg"},187:function(e,t,n){e.exports=n.p+"static/media/brain.c6301611.svg"},188:function(e,t,n){e.exports=n.p+"static/media/circle.ed6d433a.svg"},189:function(e,t,n){e.exports=n.p+"static/media/mouse.7e294e96.svg"},190:function(e,t,n){e.exports=n.p+"static/media/resiliencead.7500217a.svg"},195:function(e,t,n){e.exports=n(391)},391:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"BUNDLE_MASK_QUERY_RESULTS",function(){return E}),n.d(a,"BUNDLE_MASK_QUERY_COUNT",function(){return C}),n.d(a,"BUNDLE_MASK_QUERY_SELECT_COLUMNS",function(){return R}),n.d(a,"BUNDLE_MASK_QUERY_MAX_ROWS_PER_PAGE",function(){return k}),n.d(a,"BUNDLE_MASK_QUERY_COLUMN_MODELS",function(){return w}),n.d(a,"BUNDLE_MASK_QUERY_FACETS",function(){return O}),n.d(a,"ENTITY_BUNDLE_MASK_ENTITY",function(){return N}),n.d(a,"ENTITY_BUNDLE_MASK_ANNOTATIONS",function(){return x}),n.d(a,"ENTITY_BUNDLE_MASK_PERMISSIONS",function(){return L}),n.d(a,"ENTITY_BUNDLE_MASK_ENTITY_PATH",function(){return I}),n.d(a,"ENTITY_BUNDLE_MASK_HAS_CHILDREN",function(){return T}),n.d(a,"ENTITY_BUNDLE_MASK_ACL",function(){return F}),n.d(a,"ENTITY_BUNDLE_MASK_FILE_HANDLES",function(){return D}),n.d(a,"ENTITY_BUNDLE_MASK_TABLE_DATA",function(){return M}),n.d(a,"ENTITY_BUNDLE_MASK_ROOT_WIKI_ID",function(){return j}),n.d(a,"ENTITY_BUNDLE_MASK_BENEFACTOR_ACL",function(){return A}),n.d(a,"ENTITY_BUNDLE_MASK_DOI",function(){return P}),n.d(a,"ENTITY_BUNDLE_MASK_FILE_NAME",function(){return _}),n.d(a,"ENTITY_BUNDLE_MASK_THREAD_COUNT",function(){return U}),n.d(a,"ENTITY_BUNDLE_MASK_RESTRICTION_INFORMATION",function(){return q}),n.d(a,"STUDY",function(){return B}),n.d(a,"STUDY_ACTIVE",function(){return H}),n.d(a,"STUDY_COMPLETE",function(){return Q}),n.d(a,"DATASET",function(){return W}),n.d(a,"AMP_CONSORTIUM",function(){return V}),n.d(a,"FUNDER",function(){return z}),n.d(a,"PUBLICATION",function(){return K}),n.d(a,"TOOL",function(){return Y}),n.d(a,"CSBC_PROJECT",function(){return G}),n.d(a,"CSBC_PUBLICATION",function(){return J}),n.d(a,"CSBC_STUDY",function(){return Z}),n.d(a,"CSBC_DATASET",function(){return $}),n.d(a,"GENERIC_CARD",function(){return X}),n.d(a,"COMPUTATIONAL",function(){return ee}),n.d(a,"EXPERIMENTAL",function(){return te}),n.d(a,"CLINICAL",function(){return ne}),n.d(a,"PROJECT",function(){return ae}),n.d(a,"PAGE_SIZE",function(){return re}),n.d(a,"SMALL_USER_CARD",function(){return oe}),n.d(a,"MEDIUM_USER_CARD",function(){return ie}),n.d(a,"LARGE_USER_CARD",function(){return se}),n.d(a,"SEPERATOR",function(){return ce});var r={};n.r(r),n.d(r,"IS_DEV_ENV",function(){return be}),n.d(r,"DEV_ENV_SESSION_LOCAL_STORAGE_KEY",function(){return ve}),n.d(r,"AUTH_PROVIDER",function(){return ye}),n.d(r,"SYNAPSE_STORAGE_LOCATION_ID",function(){return Ee}),n.d(r,"getRootURL",function(){return Ce}),n.d(r,"doPost",function(){return we}),n.d(r,"doGet",function(){return Oe}),n.d(r,"doPut",function(){return Ne}),n.d(r,"putRefreshSessionToken",function(){return xe}),n.d(r,"getVersion",function(){return Le}),n.d(r,"getQueryTableResultsFromJobId",function(){return Ie}),n.d(r,"getQueryTableResults",function(){return Te}),n.d(r,"getFullQueryTableResults",function(){return Fe}),n.d(r,"login",function(){return De}),n.d(r,"oAuthUrlRequest",function(){return Me}),n.d(r,"oAuthSessionRequest",function(){return je}),n.d(r,"createEntity",function(){return Ae}),n.d(r,"createProject",function(){return Pe}),n.d(r,"getUserProfile",function(){return _e}),n.d(r,"getUserProfileById",function(){return Ue}),n.d(r,"getUserBundle",function(){return qe}),n.d(r,"getUserProfiles",function(){return Be}),n.d(r,"getEntityChildren",function(){return He}),n.d(r,"lookupChildEntity",function(){return Qe}),n.d(r,"getFiles",function(){return We}),n.d(r,"getEntity",function(){return Ve}),n.d(r,"updateEntity",function(){return ze}),n.d(r,"getEntityBundleForVersion",function(){return Ke}),n.d(r,"getEntityWiki",function(){return Ye}),n.d(r,"getUserFavorites",function(){return Ge}),n.d(r,"getUserProjectList",function(){return Je}),n.d(r,"getUserTeamList",function(){return Ze}),n.d(r,"getTeamList",function(){return $e}),n.d(r,"getWikiAttachmentsFromEntity",function(){return Xe}),n.d(r,"getWikiAttachmentsFromEvaluation",function(){return et}),n.d(r,"setSessionTokenCookie",function(){return tt}),n.d(r,"getSessionTokenFromCookie",function(){return nt}),n.d(r,"getPrincipalAliasRequest",function(){return at}),n.d(r,"detectSSOCode",function(){return rt}),n.d(r,"signOut",function(){return ot}),n.d(r,"uploadFile",function(){return it}),n.d(r,"checkUploadComplete",function(){return lt}),n.d(r,"startMultipartUpload",function(){return dt}),n.d(r,"getFileEntityContent",function(){return mt}),n.d(r,"createACL",function(){return ht}),n.d(r,"submitToEvaluation",function(){return pt}),n.d(r,"getEvaluation",function(){return ft});var o=n(0),i=n(58),s=n(394),c=n(393),l=n(395),u=n(163),d=n.n(u),m=n(3),h=n(4),p=n(7),f=n(5),g=n(1),b=n(6),v=n(15),S=function(e){var t=e.children,n={paddingRight:10,fontWeight:500,paddingLeft:e.icon?0:10,paddingTop:10,paddingBottom:10,textAlign:"center",width:"100%"};return o.createElement("span",{style:n},t)},y=function(e){var t=e.active;return o.createElement("div",{style:{background:t?"#fff":"#eee",paddingTop:7,paddingRight:10,paddingBottom:4,paddingLeft:10,borderRadius:2}},o.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{fill:"#000",fillRule:"evenodd"},o.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),o.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),o.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),o.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),o.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))},E=1,C=2,R=4,k=8,w=16,O=32,N=1,x=2,L=4,I=8,T=32,F=64,D=2048,M=4096,j=8192,A=16384,P=32768,_=65536,U=131072,q=262144,B="study",H="study active",Q="study complete",W="dataset",V="AMP_Consortium",z="funder",K="publication",Y="tool",G="CSBC_PROJECT",J="CSBC_PUBLICATION",Z="CSBC_STUDY",$="CSBC_DATSET",X="GENERIC_CARD",ee="computational",te="experimental",ne="clinical",ae="Project",re=25,oe="SMALL USER CARD",ie="MEDIUM USER CARD",se="LARGE USER CARD",ce="SEPERATOR",le=n(10),ue=n.n(le),de=n(67),me=n(13),he=n(45),pe=n(19),fe=n(164),ge=n.n(fe),be=!1,ve="session-token-dev-mode-only",Se="https://repo-prod.prod.sagebase.org/",ye="GOOGLE_OAUTH_2_0",Ee=1,Ce=function(){var e=window.location.port?":".concat(window.location.port):"";return"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(e,"/")};function Re(e){return new Promise(function(t){setTimeout(t.bind(null,{}),e)})}var ke=function e(t,n,a,r){return fetch(t,n).then(function(o){return o.status>199&&o.status<300?204===o.status?o:o.text().then(function(e){var t="";try{t=JSON.parse(e)}catch(n){console.log("Caught exception with parsing json ",n),t=e}return t||{}}).catch(function(e){return console.log("Caught exception loading response text ",e),{}}):429===o.status||0===o.status?1===r?Promise.reject({reason:o.statusText,statusCode:o.status}):Re(a).then(function(){return e(t,n,2*a,r-1)}):o.json().then(function(e){var t={reason:e.reason,status:o.status};return o.ok?e:Promise.reject(t)}).catch(function(e){return e.reason&&e.status?Promise.reject({reason:e.reason,statusCode:e.status}):Promise.reject({reason:o.statusText,statusCode:o.status})})}).catch(function(e){return Promise.reject(e)})},we=function(e,t,n,a,r){var o={body:JSON.stringify(t),headers:{Accept:"*/*","Access-Control-Request-Headers":"sessiontoken","Content-Type":"application/json"},method:"POST",mode:"cors",credentials:a};return a&&(o.credentials=a),n&&(o.headers.sessionToken=n),ke(r+e,o,1e3,5)},Oe=function(e,t,n,a){var r={headers:{Accept:"*/*","Access-Control-Request-Headers":"sessiontoken"},method:"GET",mode:"cors"};return n&&(r.credentials=n),t&&(r.headers.sessionToken=t),ke(a+e,r,1e3,5)},Ne=function(e,t,n,a,r){var o={body:JSON.stringify(t),headers:{Accept:"*/*","Access-Control-Request-Headers":"sessiontoken","Content-Type":"application/json"},method:"PUT",mode:"cors"};return a&&(o.credentials=a),n&&(o.headers.sessionToken=n),ke(r+e,o,1e3,5)},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;return Ne("/auth/v1/session",{sessionToken:e},void 0,void 0,t)},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se;return Oe("/repo/v1/version",void 0,void 0,e)},Ie=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se,o=arguments.length>4?arguments[4]:void 0;return Oe("/repo/v1/entity/".concat(t,"/table/query/async/get/").concat(n),a,void 0,r).then(function(i){return i.jobState&&"FAILED"!==i.jobState?(o&&o({asyncJobStatus:i}),Re(500).then(function(){return e(t,n,a,r,o)})):i}).catch(function(e){throw e})},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se;return we("/repo/v1/entity/".concat(e.entityId,"/table/query/async/start"),e,t,void 0,a).then(function(r){return Ie(e.entityId,r.token,t,a,n)}).catch(function(e){throw e})},Fe=function(){var e=Object(pe.a)(ue.a.mark(function e(t){var n,a,r,o,i,s,c=arguments;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:void 0,a=t.query,r=Object(he.a)(t,["query"]),o={},i=150,s=Object(me.a)({},r,{query:Object(me.a)({},a,{limit:i})}),e.next=7,Te(s,n).then(function(){var e=Object(pe.a)(ue.a.mark(function e(t){var s,c,l;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.queryResult.queryResults.rows.length,c=s,o=t,l=function(){var e=Object(pe.a)(ue.a.mark(function e(){var u;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s!==i){e.next=7;break}return i=t.maxRowsPerPage,u=Object(me.a)({},r,{query:Object(me.a)({},a,{limit:i,offset:c})}),e.next=5,Te(u,n).then(function(e){var t;(s+=e.queryResult.queryResults.rows.length)>0&&(c+=s,(t=o.queryResult.queryResults.rows).push.apply(t,Object(de.a)(e.queryResult.queryResults.rows)));return l()}).catch(function(e){console.log("Error on getting table results ",e)});case 5:e.next=8;break;case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",l());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),De=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return we("/auth/v1/login",{username:e,password:t},void 0,void 0,n)},Me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return we("/auth/v1/oauth2/authurl",{provider:e,redirectUrl:t},void 0,void 0,n)},je=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se;return we("/auth/v1/oauth2/session",{provider:e,authenticationCode:t,redirectUrl:n},void 0,void 0,a)},Ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return we("/repo/v1/entity",e,t,void 0,n)},Pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return Ae({name:e,concreteType:"org.sagebionetworks.repo.model.Project"},t,n)},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;return Oe("/repo/v1/userProfile",e,void 0,t)},Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return Oe("/repo/v1/userProfile/".concat(t),e,void 0,n)},qe=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se;return Oe("repo/v1/user/".concat(e,"/bundle?mask=").concat(t),n,void 0,a)},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return we("/repo/v1/userProfile",{list:e},t,void 0,n)},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return we("/repo/v1/entity/children",e,t,void 0,n)},Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return we("/repo/v1/entity/child",e,t,void 0,n)},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return we("/file/v1/fileHandle/batch",e,t,void 0,n)},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se,a="/repo/v1/entity/".concat(t);return Oe(a,e,void 0,n)},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se,a="/repo/v1/entity/".concat(e.id);return Ne(a,e,t,void 0,n)},Ke=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Se,o="/repo/v1/entity/".concat(e);return t&&(o+="/version/ + ".concat(t)),o+="/bundle?mask= ".concat(n),Oe(o,a,void 0,r)},Ye=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se,r="/repo/v1/entity/".concat(t,"/wiki/").concat(n);return Oe(r,e,void 0,a)},Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;return Oe("repo/v1/favorite?offset=0&limit=200",e,void 0,t)},Je=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se,a="repo/v1/projects/".concat(t,"?offset=0&limit=200");return Oe(a,e,void 0,n)},Ze=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se,a="repo/v1/user/".concat(t,"/team?offset=0&limit=200");return Oe(a,e,void 0,n)},$e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Se,i="repo/v1/teamMembers/".concat(t,"?limit=").concat(a,"&offset=").concat(r).concat(n?"&fragment=".concat(n):"");return Oe(i,e,void 0,o)},Xe=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se,r="repo/v1/entity/".concat(t,"/wiki/").concat(n,"/attachmenthandles");return Oe(r,e,void 0,a)},et=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se,r="repo/v1/evaluation/".concat(t,"/wiki/").concat(n,"/attachmenthandles");return Oe(r,e,void 0,a)},tt=function(e){return be?(e?localStorage.setItem(ve,e):localStorage.removeItem(ve),Promise.resolve()):we("Portal/sessioncookie",{sessionToken:e},void 0,"include","https://www.synapse.org/")},nt=function(){if(!be)return Oe("Portal/sessioncookie",void 0,"include","https://www.synapse.org/");var e=localStorage.getItem(ve);return Promise.resolve(e)},at=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se;return we("repo/v1/principal/alias",{alias:t,type:n},e,void 0,a)},rt=function(){var e=Ce(),t=new URL(window.location.href),n=t.searchParams;n&&(t=n.get("code"))&&je(ye,t,"".concat(e,"?provider=").concat(ye)).then(function(e){tt(e.sessionToken).then(function(){var e=localStorage.getItem("after-sso-login-url");localStorage.removeItem("after-sso-login-url"),e&&window.location.replace(e)}).catch(function(e){console.error("Error on set sesion token cookie ",e)})}).catch(function(e){404===e.statusCode&&window.location.replace("https://www.synapse.org/#!RegisterAccount:0"),console.error("Error on sso sign in ",e)})},ot=function(){tt(void 0).then(function(){window.location.reload()}).catch(function(e){console.error("err when clearing the session cookie ",e)})},it=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se;return new Promise(function(r,o){var i=Math.max(5242880,n.size/1e4),s={contentType:n.type,fileName:t,fileSizeBytes:n.size,partSizeBytes:i,storageLocationId:Ee};st(n).then(function(i){s.contentMD5Hex=i,dt(e,t,n,s,r,o,a)})})},st=function(e){var t=new ge.a;return new Promise(function(n,a){t.md5(e,function(e,t){t?n(t):e&&a(e)},function(e){})})},ct=function e(t,n,a,r,o,i,s,c){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Se;if(!n.clientSidePartsState[t-1]){var u=n.uploadId,d={uploadId:u,contentType:"application/octet-stream",partNumbers:[t]},m="/file/v1/file/multipart/".concat(u,"/presigned/url/batch");we(m,d,a,void 0,l).then(function(){var m=Object(pe.a)(ue.a.mark(function m(h){var p,f,g,b;return ue.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return p=h.partPresignedUrls[0].uploadPresignedUrl,f=(t-1)*i.partSizeBytes,(g=t*i.partSizeBytes-1)>=i.fileSizeBytes&&(g=i.fileSizeBytes-1),b=o.slice(f,g+1,d.contentType),m.next=7,ut(p,b,d.contentType);case 7:st(b).then(function(d){var m="/file/v1/file/multipart/".concat(u,"/add/").concat(t,"?partMD5Hex=").concat(d);Ne(m,void 0,a,void 0,l).then(function(u){"ADD_SUCCESS"===u.addPartState?(n.clientSidePartsState[t-1]=!0,lt(n,r,a,s,c,l)):Re(1e3).then(function(){e(t,n,a,r,o,i,s,c,l)})})});case 8:case"end":return m.stop()}},m)}));return function(e){return m.apply(this,arguments)}}())}},lt=function(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Se;if(e.clientSidePartsState.every(function(e){return e})){var i="/file/v1/file/multipart/".concat(e.uploadId,"/complete");Ne(i,void 0,n,void 0,o).then(function(e){a({fileHandleId:e.resultFileHandleId,fileName:t})}).catch(function(e){r(e)})}},ut=function(){var e=Object(pe.a)(ue.a.mark(function e(t,n,a){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"PUT",headers:{"Content-Type":a},body:n});case 2:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),dt=function(e,t,n,a,r,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Se;we("file/v1/file/multipart",a,e,void 0,i).then(function(){var s=Object(pe.a)(ue.a.mark(function s(c){var l,u;return ue.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:l=c.partsState.split("").map(function(e){return"1"===e}),c.clientSidePartsState=l,u=0;case 3:if(!(u<l.length)){s.next=10;break}if(l[u]){s.next=7;break}return s.next=7,ct(u+1,c,e,t,n,a,r,o,i);case 7:u+=1,s.next=3;break;case 10:lt(c,t,e,r,o,i);case 11:case"end":return s.stop()}},s)}));return function(e){return s.apply(this,arguments)}}()).catch(function(e){o(e)})},mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return new Promise(function(a,r){var o=[{associateObjectId:t.id,associateObjectType:"FileEntity",fileHandleId:t.dataFileHandleId}];We({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:o},e,n).then(function(e){var t=e.requestedFiles[0].preSignedURL,n=e.requestedFiles[0].fileHandle;n.contentSize<5242880?fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":n.contentType}}).then(function(e){e.text().then(function(e){a(e)})}):r("File size exceeds max (5MB)")}).catch(function(e){r(e)})})},ht=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se;return we("/repo/v1/entity/".concat(e,"/acl"),t,n,void 0,a)},pt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Se;return we("/repo/v1/evaluation/submission?etag=".concat(t),e,n,void 0,a)},ft=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;return Oe("/repo/v1/evaluation/".concat(e),t,void 0,n)},gt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={email:"",errorMessage:"",hasLoginInFailed:!1,isSignedIn:!1,password:"",username:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleLogin=n.handleLogin.bind(Object(g.a)(n)),n.getTokenView=n.getTokenView.bind(Object(g.a)(n)),n.getLoginFailureView=n.getLoginFailureView.bind(Object(g.a)(n)),n.onSignIn=n.onSignIn.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=e.currentTarget,n=t.name,a=t.value,r=Object(v.a)({},n,a);this.setState(r)}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),r.login(this.state.username,this.state.password).then(function(e){r.setSessionTokenCookie(e.sessionToken).then(function(){window.location.reload()}).catch(function(e){console.log("Could not set session token cookie!",e),t.setState({errorMessage:e.reason,hasLoginInFailed:!0,isSignedIn:!1})})}).catch(function(e){console.log("Handle login failed with err = ",e),t.setState({errorMessage:e.reason,hasLoginInFailed:!0,isSignedIn:!1})})}},{key:"getTokenView",value:function(){return!(!this.state.isSignedIn||""===this.props.token||this.state.hasLoginInFailed)&&o.createElement("p",null," Your session token is ",this.props.token," ")}},{key:"getLoginFailureView",value:function(){return!!this.state.hasLoginInFailed&&o.createElement("div",null,o.createElement("small",{className:"form-text text-danger"}," ",this.state.errorMessage," "),o.createElement("div",{className:"invalid-feedback"}))}},{key:"getSignInStateView",value:function(){return!this.state.isSignedIn&&o.createElement("p",null," ","You are currently"," ",o.createElement("strong",null," ",o.createElement("i",null," not ")," ")," ","signed in to Synpase"," ")}},{key:"onSignIn",value:function(e){localStorage.setItem("after-sso-login-url",window.location.href),e.preventDefault(),r.oAuthUrlRequest(r.AUTH_PROVIDER,"".concat(r.getRootURL(),"?provider=").concat(r.AUTH_PROVIDER)).then(function(e){var t=e.authorizationUrl;window.location=t}).catch(function(e){console.log("Error on oAuth url ",e)})}},{key:"render",value:function(){var e=this.props,t=e.theme,n=e.icon,a="dark"===t?"SRC-google-button-dark-color":"SRC-google-button-light-color";return o.createElement("div",{id:"loginPage",className:"container loginContainer SRC-syn-border-spacing"},o.createElement("form",null,o.createElement("button",{onClick:this.onSignIn,className:"SRC-google-button ".concat(a," SRC-marginBottomTen")},o.createElement(y,{key:1,active:!0}),o.createElement(S,{icon:n,key:2},"Sign in with Google"))),o.createElement("div",{className:"SRC-center-text SRC-deemphasized-text SRC-marginBottomTen"},"or"),o.createElement("div",{className:"SRC-center-text SRC-marginBottomTen"},"Sign in with your Synapse account"),o.createElement("form",{onSubmit:this.handleLogin},o.createElement("div",{className:"form-group"},o.createElement("input",{autoComplete:"email",placeholder:"username or email",className:"form-control",id:"exampleEmail",name:"username",type:"text",value:this.state.username,onChange:this.handleChange,"data-lpignore":"true"})),o.createElement("div",{className:"form-group"},o.createElement("input",{autoComplete:"password",placeholder:"password",className:"form-control",id:"examplePassword",name:"password",type:"password",value:this.state.password,onChange:this.handleChange,"data-lpignore":"true"})),this.getLoginFailureView(),o.createElement("button",{onSubmit:this.handleLogin,type:"submit",className:"btn SRC-primary-background-color SRC-hoverWhiteText SRC-whiteText m-1 SRC-google-button SRC-marginBottomTen"},o.createElement(S,{icon:n},"Sign in"))),o.createElement("div",null,o.createElement("a",{href:"https://www.synapse.org/#!PasswordReset:0",className:"SRC-floatLeft SRC-primary-text-color"},"Forgot password?"),o.createElement("span",{className:"SRC-deemphasized-text SRC-floatRight"},"\xa0It's free!"),o.createElement("a",{href:"https://www.synapse.org/#!RegisterAccount:0",className:"SRC-floatRight SRC-primary-text-color"},"Register")))}}]),t}(o.Component),bt=(n(108),n(102)),vt=n.n(bt),St=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).formRef=void 0,n.submitForm=function(){n.formRef.current.submit()},n.refresh=function(){if(n.props.token){var e=[r.getUserProfile(n.props.token),r.getEntity(n.props.token,n.props.formSchemaEntityId),r.getEntity(n.props.token,n.props.formUiSchemaEntityId)];Promise.all(e).then(function(e){var t=e[0];n.getTargetContainer(t,n.props.token).then(function(t){var a=e[1],r=e[2];n.getSchemaFileContent(t,a,r)})}).catch(function(e){n.onError(e)})}},n.getSchemaFileContent=function(e,t,a){var o=[r.getFileEntityContent(n.props.token,t),r.getFileEntityContent(n.props.token,a)];Promise.all(o).then(function(t){var a=JSON.parse(t[0]),r=JSON.parse(t[1]);n.getExistingFileData(e,a,r)}).catch(function(e){n.onError(e)})},n.getExistingFileData=function(e,t,a){var o,i,s={entityName:"".concat(t.title,".json"),parentId:e};r.lookupChildEntity(s,n.props.token).then(function(e){return r.getEntity(n.props.token,e.id).then(function(e){return i=e,n.props.initFormData?r.getFileEntityContent(n.props.token,i).then(function(e){o=JSON.parse(e)}):Promise.resolve()})}).finally(function(){n.setState({formData:o,currentFileEntity:i,formSchema:t,formUiSchema:a})})},n.getTargetContainer=function(){var e=Object(pe.a)(ue.a.mark(function e(t,a){var o,i;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={entityName:t.ownerId,parentId:n.props.parentContainerId},e.prev=1,e.next=4,r.lookupChildEntity(o,a);case 4:return i=e.sent,console.log("EntityForm uploading to https://www.synapse.org/#!Synapse:".concat(i.id)),n.setState({userprofile:t,containerId:i.id,isLoading:!1}),e.abrupt("return",i.id);case 10:if(e.prev=10,e.t0=e.catch(1),404!==e.t0.statusCode){e.next=14;break}return e.abrupt("return",n.onError(new Error("Your folder has not yet been set up, please retry in a few minutes.")));case 14:return e.abrupt("return",n.onError(e.t0));case 15:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}(),n.finishedProcessing=function(){n.setState({isLoading:!1,successfullyUploaded:!0})},n.onError=function(e){n.setState({error:e,isLoading:!1,successfullyUploaded:!1})},n.onSubmit=function(e){var t=e.formData;n.setState({isLoading:!0,successfullyUploaded:!1});var a=new Blob([JSON.stringify(t)],{type:"text/json"});n.createEntityFile(a)},n.createEntityFile=function(e){var t="".concat(n.state.formSchema.title,".json");r.uploadFile(n.props.token,t,e).then(function(e){var a=e.fileHandleId;if(n.state.currentFileEntity)return n.state.currentFileEntity.dataFileHandleId=a,r.updateEntity(n.state.currentFileEntity,n.props.token);var o={parentId:n.state.containerId,name:t,concreteType:"org.sagebionetworks.repo.model.FileEntity",dataFileHandleId:a};return r.createEntity(o,n.props.token)}).then(function(e){n.finishedProcessing(),n.props.synIdCallback&&n.props.synIdCallback(e.id)}).catch(function(e){n.onError(e)})},n.formRef=o.createRef(),n.state={isLoading:!0,successfullyUploaded:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e){this.props.token!==e.token&&this.refresh()}},{key:"render",value:function(){return o.createElement("div",null,this.state.error&&o.createElement("div",{className:"panel panel-danger errors"},o.createElement("div",{className:"panel-heading"},o.createElement("h3",{className:"panel-title"},"Error")),o.createElement("ul",{className:"list-group"},o.createElement("li",{className:"list-group-item text-danger"},this.state.error.name," ",this.state.error.reason," ",this.state.error.message))),this.props.token&&!this.state.isLoading&&!this.state.successfullyUploaded&&this.state.formSchema&&this.state.formUiSchema&&!this.state.error&&o.createElement(vt.a,{formData:this.state.formData,schema:this.state.formSchema,uiSchema:this.state.formUiSchema,onSubmit:this.onSubmit,showErrorList:!0,ref:this.formRef},o.createElement("div",{style:{display:"none"}},o.createElement("button",{type:"submit",className:"btn btn-info"},"Submit"))),!this.state.error&&this.props.token&&this.state.isLoading&&o.createElement(o.Fragment,null,o.createElement("span",null,"Saving\u2026"),o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"})))}}]),t}(o.Component),yt=n(8),Et=n(9),Ct=n(46),Rt=["rgb(91,176,181)","rgb(124,192,196)","rgb(157,208,211)","rgb(189,223,225)","rgb(222,239,240)","rgb(217,229,236)","rgb(179,202,217)","rgb(140,176,198)","rgb(102,149,179)","rgb(64,123,160)","rgb(201,66,129)","rgb(212,104,154)","rgb(223,142,179)","rgb(233,179,205)","rgb(244,217,230)","rgb(218,214,229)","rgb(181,173,203)","rgb(145,133,177)","rgb(108,92,151)","rgb(71,51,125)","rgb(222,154,31)","rgb(229,174,76)","rgb(235,194,121)","rgb(242,215,165)","rgb(248,235,210)","rgb(207,234,231)","rgb(159,212,207)","rgb(112,191,184)","rgb(64,169,160)","rgb(16,148,136)","rgb(60,74,99)","rgb(99,110,130)","rgb(138,146,161)","rgb(177,183,193)","rgb(216,219,224)","rgb(246,226,210)","rgb(238,197,165)","rgb(229,167,120)","rgb(221,138,75)","rgb(212,109,30)","rgb(88,161,88)","rgb(121,180,121)","rgb(155,199,155)","rgb(188,217,188)","rgb(222,236,222)","rgb(220,227,242)","rgb(185,198,230)","rgb(151,170,217)","rgb(116,141,205)","rgb(81,113,192)","rgb(178,36,42)","rgb(193,80,85)","rgb(209,124,127)","rgb(224,167,170)","rgb(240,211,212)","rgb(222,239,240)","rgb(189,223,225)","rgb(157,208,211)","rgb(124,192,196)","rgb(91,176,181)","rgb(64,123,160)","rgb(102,149,179)","rgb(140,176,198)","rgb(179,202,217)","rgb(217,229,236)","rgb(244,217,230)","rgb(233,179,205)","rgb(223,142,179)","rgb(212,104,154)","rgb(201,66,129)","rgb(71,51,125)","rgb(108,92,151)","rgb(145,133,177)","rgb(181,173,203)","rgb(218,214,229)","rgb(248,235,210)","rgb(242,215,165)","rgb(235,194,121)","rgb(229,174,76)","rgb(222,154,31)","rgb(16,148,136)","rgb(64,169,160)","rgb(112,191,184)","rgb(159,212,207)","rgb(207,234,231)","rgb(216,219,224)","rgb(177,183,193)","rgb(138,146,161)","rgb(99,110,130)","rgb(60,74,99)","rgb(212,109,30)","rgb(221,138,75)","rgb(229,167,120)","rgb(238,197,165)","rgb(246,226,210)","rgb(222,236,222)","rgb(188,217,188)","rgb(155,199,155)","rgb(121,180,121)","rgb(88,161,88)","rgb(81,113,192)","rgb(116,141,205)","rgb(151,170,217)","rgb(185,198,230)","rgb(220,227,242)","rgb(240,211,212)","rgb(224,167,170)","rgb(209,124,127)","rgb(193,80,85)","rgb(178,36,42)"],kt=["rgb(64,123,160)","rgb(102,149,179)","rgb(140,176,198)","rgb(179,202,217)","rgb(217,229,236)","rgb(244,217,230)","rgb(233,179,205)","rgb(223,142,179)","rgb(212,104,154)","rgb(201,66,129)","rgb(71,51,125)","rgb(108,92,151)","rgb(145,133,177)","rgb(181,173,203)","rgb(218,214,229)","rgb(248,235,210)","rgb(242,215,165)","rgb(235,194,121)","rgb(229,174,76)","rgb(222,154,31)","rgb(16,148,136)","rgb(64,169,160)","rgb(112,191,184)","rgb(159,212,207)","rgb(207,234,231)","rgb(216,219,224)","rgb(177,183,193)","rgb(138,146,161)","rgb(99,110,130)","rgb(60,74,99)","rgb(212,109,30)","rgb(221,138,75)","rgb(229,167,120)","rgb(238,197,165)","rgb(246,226,210)","rgb(222,236,222)","rgb(188,217,188)","rgb(155,199,155)","rgb(121,180,121)","rgb(88,161,88)","rgb(81,113,192)","rgb(116,141,205)","rgb(151,170,217)","rgb(185,198,230)","rgb(220,227,242)","rgb(240,211,212)","rgb(224,167,170)","rgb(209,124,127)","rgb(193,80,85)","rgb(178,36,42)","rgb(91,176,181)","rgb(124,192,196)","rgb(157,208,211)","rgb(189,223,225)","rgb(222,239,240)","rgb(217,229,236)","rgb(179,202,217)","rgb(140,176,198)","rgb(102,149,179)","rgb(64,123,160)","rgb(201,66,129)","rgb(212,104,154)","rgb(223,142,179)","rgb(233,179,205)","rgb(244,217,230)","rgb(218,214,229)","rgb(181,173,203)","rgb(145,133,177)","rgb(108,92,151)","rgb(71,51,125)","rgb(222,154,31)","rgb(229,174,76)","rgb(235,194,121)","rgb(242,215,165)","rgb(248,235,210)","rgb(207,234,231)","rgb(159,212,207)","rgb(112,191,184)","rgb(64,169,160)","rgb(16,148,136)","rgb(60,74,99)","rgb(99,110,130)","rgb(138,146,161)","rgb(177,183,193)","rgb(216,219,224)","rgb(246,226,210)","rgb(238,197,165)","rgb(229,167,120)","rgb(221,138,75)","rgb(212,109,30)","rgb(88,161,88)","rgb(121,180,121)","rgb(155,199,155)","rgb(188,217,188)","rgb(222,236,222)","rgb(220,227,242)","rgb(185,198,230)","rgb(151,170,217)","rgb(116,141,205)","rgb(81,113,192)","rgb(178,36,42)","rgb(193,80,85)","rgb(209,124,127)","rgb(224,167,170)","rgb(240,211,212)","rgb(222,239,240)","rgb(189,223,225)","rgb(157,208,211)","rgb(124,192,196)","rgb(91,176,181)"];function wt(e,t){var n=[],a=[],r=-1;e%2===0?(n=Rt,r=5*e):(n=kt,r=5*(e-1));for(var o=[],i=0;i<t;i+=1){var s=i%10<2||i%10>7?"white":"black",c="".concat(n[(r+i)%n.length]);o.push(c),a.push(s)}return{colorPalette:o,textColors:a}}var Ot=n(14),Nt=n(40),xt=n.n(Nt),Lt=n(103),It=n.n(Lt);function Tt(e){return(It.a||Lt)(e)}var Ft=function(){var e=Object(pe.a)(ue.a.mark(function e(t,n,o){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getQueryTableResults(t,o).then(function(e){var t,r=Tt(n),o=e.queryResult.queryResults.rows.length===a.PAGE_SIZE;return(t=r.queryResult.queryResults.rows).push.apply(t,Object(de.a)(e.queryResult.queryResults.rows)),{hasMoreData:o,data:r}}).catch(function(e){return console.log("Failed to get data ",e),{}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),Dt=function(e){var t=e.isLoading,n=e.lastFacetSelection,a=e.curFacetSelection,r=e.columnName;if(t&&r===n.columnName){if(n.facetValue===a.value)return!a.isSelected;if(n.selector===zt)return!1}return a.isSelected},Mt=function(e){var t=e.htmlCheckboxes,n=e.selector,a=e.queryRequest,r=e.filter,o=e.value,i=[];if(n)n===zt&&i.push(o);else for(var s=0;s<t.length;s+=1){var c=t[s];c.checked&&i.push(c.value)}var l=a,u=l.query.selectedFacets,d=void 0===u?[]:u,m=d.find(function(e){return e.columnName===r});if(m)m.facetValues=i;else{var h={facetValues:i,concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",columnName:r};d.push(h),l.query.selectedFacets=d}return{newQueryRequest:l}},jt=n(47),At=function(e){var t=e[e.findIndex(function(e){return"FROM"===e[0]})+1][1],n=jt.parser.parse(e).toString(),a="`".concat(t,"`");return n.split(a).join(t)},Pt=700;yt.b.add(Et.f),yt.b.add(Et.p),yt.b.add(Et.r),yt.b.add(Et.q),yt.b.add(Et.d),yt.b.add(Et.s),yt.b.add(Et.j),yt.b.add(Et.h);var _t="NEXT",Ut="PREVIOUS",qt="SELECT_ALL",Bt=["sort-amount-down","sort-amount-down","sort-amount-up"],Ht=["","DESC","ASC"],Qt=/group by/im,Wt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).showGroupRowData=function(e){return function(t){var a=Tt(n.props.getLastQueryRequest().query),r=n.props.data,o=r.queryResult,i=r.columnModels,s=o.queryResults.headers,c=n.getSqlUnderlyingDataForRow(e,a.sql,s,i);a.sql=c.newSql;var l=JSON.stringify(a),u=btoa(l);window.open("https://www.synapse.org/#!Synapse:".concat(c.synId,"/tables/query/").concat(u),"_self")}},n.handlePaginationClick=function(e){return function(t){var a=n.props.getLastQueryRequest(),r=a.query.offset;e===Ut&&(r-=25),e===_t&&(r+=25),a.query.offset=r,n.props.executeQueryRequest(a)}},n.handleColumnSortPress=function(e){return function(t){var a=Tt(n.state.columnIconSortState);0===a.length&&(a=Array(n.getLengthOfPropsData()).fill(0));var r=Tt(n.state.sortedColumnSelection),o=n.findSelectionIndex(r,e.name);-1!==o&&r.splice(o,1),a[e.index]=(a[e.index]+1)%Bt.length,a[e.index]>0&&r.unshift({column:e.name,direction:Ht[a[e.index]]});var i=n.props.getLastQueryRequest();i.query.sort=r,n.props.executeQueryRequest(i),n.setState({columnIconSortState:a,sortedColumnSelection:r})}},n.toggleColumnSelection=function(e){return function(t){var a;if(t.preventDefault(),0===n.state.isColumnSelected.length){var r,o=n.props.visibleColumnCount,i=void 0===o?1/0:o,s=n.getLengthOfPropsData();i===1/0?r=Array(s).fill(!0):(r=Array(s).fill(!1)).fill(!0,0,i),a=r}else a=Tt(n.state.isColumnSelected);a[e]=!a[e],n.setState({isColumnSelected:a})}},n.applyChanges=function(e){var t=e.ref,a=e.columnName,r=e.facetValue,o=void 0===r?"":r,i=e.selector,s=void 0===i?"":i;return function(e){var r=Array.from(t.current.querySelectorAll(".SRC-facet-checkboxes")),i=n.props.getLastQueryRequest(),c=n.props.isAllFilterSelectedForFacet,l=Mt({htmlCheckboxes:r,queryRequest:i,selector:s,filter:a}).newQueryRequest,u={columnName:a,facetValue:o,selector:s};c[a]=s===qt,n.props.updateParentState({lastFacetSelection:u,isAllFilterSelectedForFacet:c}),n.props.executeQueryRequest(l)}},n.toggleFilterDropdown=function(e,t,a){return function(r){var o=Tt(n.state.isFilterSelected),i=Tt(n.state.filterClassList);o[e]=!t;for(var s=0;s<o.length;s+=1)s!==e&&(o[s]=!1);var c=a.current.parentElement.getBoundingClientRect().left,l="";l=o[e]?c<Pt?"SRC-forceLeftDropdown dropdown-menu-left":"dropdown-menu-right":"",i[e]=l,n.setState({filterClassList:i,isFilterSelected:o,isOpen:!1,menuWallIsActive:!t})}},n.handleColumnSortPress=n.handleColumnSortPress.bind(Object(g.a)(n)),n.handlePaginationClick=n.handlePaginationClick.bind(Object(g.a)(n)),n.findSelectionIndex=n.findSelectionIndex.bind(Object(g.a)(n)),n.toggleColumnSelection=n.toggleColumnSelection.bind(Object(g.a)(n)),n.toggleMenuWall=n.toggleMenuWall.bind(Object(g.a)(n)),n.advancedSearch=n.advancedSearch.bind(Object(g.a)(n)),n.download=n.download.bind(Object(g.a)(n)),n.getLengthOfPropsData=n.getLengthOfPropsData.bind(Object(g.a)(n)),n.configureFacetDropdown=n.configureFacetDropdown.bind(Object(g.a)(n)),n.closeMenuClickHandler=n.closeMenuClickHandler.bind(Object(g.a)(n)),n.showPaginationButtons=n.showPaginationButtons.bind(Object(g.a)(n)),n.useFacetAliasIfDefined=n.useFacetAliasIfDefined.bind(Object(g.a)(n)),n.applyChanges=n.applyChanges.bind(Object(g.a)(n)),n.toggleFilterDropdown=n.toggleFilterDropdown.bind(Object(g.a)(n)),n.state={columnIconSortState:[],filterClassList:Array(100).fill(""),isColumnSelected:[],isFilterSelected:Array(100).fill(!1),isOpen:!1,menuWallIsActive:!1,offset:0,sortedColumnSelection:[]},n.renderFacetSelection=n.renderFacetSelection.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"useFacetAliasIfDefined",value:function(e){var t=this.props.facetAliases;return(void 0===t?{}:t)[e]||e}},{key:"isGroupByInSql",value:function(e){var t=e||this.props.getLastQueryRequest().query.sql;return Qt.test(t)}},{key:"render",value:function(){if(void 0===this.props.data)return o.createElement("div",null);var e=this.props,t=e.data,n=e.filter,a=e.isLoading,r=e.unitDescription,i=t.queryResult.queryResults,s=i.rows,c=i.headers,l=t.facets,u=wt(this.props.rgbIndex,1).colorPalette[0],d=this.props.getLastQueryRequest().query.offset>0,m=[];t.facets.forEach(function(e){"enumeration"===e.facetType&&e.columnName===n&&e.facetValues.forEach(function(t){e.columnName&&m.push(Object(me.a)({columnName:e.columnName},t))})});var h=!1,p=0,f=0;for(var g in m)m.hasOwnProperty(g)&&(h=h||m[g].isSelected,p+=m[g].count,f+=m[g].isSelected?m[g].count:0);var b=h?f:p;0===s.length&&(b=0);var v=this.state,S=v.menuWallIsActive?"":"hidden",y="SRC-extraPadding SRC-primary-background-color-hover dropdown-toggle SRC-hand-cursor";return y+=v.isOpen?"SRC-primary-background-color":"",o.createElement(o.Fragment,null,o.createElement("button",{onClick:this.closeMenuClickHandler,className:"SRC-menu-wall ".concat(S)}),o.createElement("div",{className:"SRC-marginBottomTen"},o.createElement("p",{style:{height:"20px"}},!a&&o.createElement("strong",null," Showing ",b," ",r," "),a&&o.createElement(o.Fragment,null,o.createElement("span",{className:"spinner"}),o.createElement("strong",null," ","    "," Table results updating...")))),o.createElement("div",{className:"SRC-padding SRC-centerContent",style:{background:u}},o.createElement("h3",{className:"SRC-tableHeader"}," ",this.props.title),o.createElement("span",{style:{marginLeft:"auto",marginRight:"10px"}},o.createElement("span",{className:" dropdown ".concat(this.state.isOpen?"open":"")},o.createElement("span",{tabIndex:0,"data-for":"openAdvancedSearch","data-tip":"Open Advanced Search in Synapse",className:"SRC-primary-background-color-hover SRC-extraPadding SRC-hand-cursor",onKeyPress:this.advancedSearch,onClick:this.advancedSearch},o.createElement(Ot.a,{size:"1x",color:"white",icon:"database"})),o.createElement(xt.a,{delayShow:1500,place:"bottom",type:"dark",effect:"solid",id:"openAdvancedSearch"}),!this.isGroupByInSql()&&o.createElement(o.Fragment,null,o.createElement("span",{tabIndex:0,"data-for":"addAndRemoveColumns","data-tip":"Add / Remove Columns",style:{marginLeft:"10px"},className:y,onKeyPress:this.toggleMenuWall,onClick:this.toggleMenuWall,id:"dropdownMenu1"},o.createElement(Ot.a,{color:"white",icon:"columns"})),o.createElement(xt.a,{delayShow:1500,place:"bottom",type:"dark",effect:"solid",id:"addAndRemoveColumns"}),o.createElement("ul",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu1"},this.renderDropdownColumnMenu(c)))))),o.createElement("div",{style:{minHeight:"300px"},className:"SRC-overflowAuto"},o.createElement("table",{className:"table table-striped table-condensed"},o.createElement("thead",{className:"SRC_borderTop"},o.createElement("tr",null,this.createTableHeader(c,l))),o.createElement("tbody",null,this.createTableRows(s,c))),b>0&&this.showPaginationButtons(d)))}},{key:"getCountFunctionColumnIndexes",value:function(e){var t=[];if(this.isGroupByInSql(e))for(var n=jt.lexer.tokenize(e),a=n.findIndex(function(e){return"SELECT"===e[0]}),r=n.findIndex(function(e){return"FROM"===e[0]}),o=0,i=a+1;i<r-a-1;i+=1){var s=n[i];"FUNCTION"===s[0]&&"count"===s[1].toLowerCase()?t.push(o):"SEPARATOR"===s[0]&&(o+=1)}return t}},{key:"getSqlUnderlyingDataForRow",value:function(e,t,n,a){var r=jt.lexer.tokenize(t),o=(r=r.slice(0,r.findIndex(function(e){return"GROUP"===e[0]}))).findIndex(function(e){return"SELECT"===e[0]}),i=r.findIndex(function(e){return"FROM"===e[0]});if(r.splice(o+1,i-o-1,["STAR","*","1"]),void 0===this.props.data)return{synId:"",newSql:""};-1===r.findIndex(function(e){return"WHERE"===e[0]})?r.push(["WHERE","WHERE","1"]):r.push(["CONDITIONAL","AND","1"]),n.forEach(function(t,n){var o=a.find(function(e){return e.name===t.name});if(o){var i=e.values[n];r.push(["LITERAL",o.name,"1"],["OPERATOR","=","1"],["STRING",i,"1"],["CONDITIONAL","AND","1"])}}),r.pop();var s=r[r.findIndex(function(e){return"FROM"===e[0]})+1][1];return r.push(["EOF","","1"]),{synId:s,newSql:At(r)}}},{key:"showPaginationButtons",value:function(e){var t=o.createElement("button",{onClick:this.handlePaginationClick(Ut),className:"SRC-primary-background-color-hover SRC-viewMoreButton pull-right",type:"button"},"Previous"),n=o.createElement("button",{onClick:this.handlePaginationClick(_t),className:"SRC-primary-background-color-hover SRC-viewMoreButton pull-right",type:"button"},"Next");return o.createElement(o.Fragment,null,n,e&&t)}},{key:"renderDropdownColumnMenu",value:function(e){var t=this;return e.map(function(e,n){var a=t.state.isColumnSelected[n],r=t.props.visibleColumnCount;void 0===a&&(a=n<(void 0===r?1/0:r));var i={width:"11px",marginRight:"10px"};a||(i.visibility="hidden");var s=a?"SRC-primary-text-color":"";return o.createElement("li",{style:{listStyle:"none"},className:"SRC-table-dropdown-list SRC-primary-background-color-hover",key:e.name,onClick:t.toggleColumnSelection(n)},o.createElement("a",{className:"SRC-no-focus",href:""},o.createElement(Ot.a,{style:i,className:s,icon:"check"}),e.name))})}},{key:"createTableRows",value:function(e,t){var n=this,a=[],r=this.state.isColumnSelected.length,i=this.getCountFunctionColumnIndexes(this.props.getLastQueryRequest().query.sql);return e.forEach(function(e,s){var c=e.values.map(function(a,c){var l=t[c].name,u=n.findSelectionIndex(n.state.sortedColumnSelection,l),d=n.props.visibleColumnCount,m=c<(void 0===d?1/0:d)&&0===r,h=0!==r&&n.state.isColumnSelected[c],p=i.includes(c);return m||h?o.createElement("td",{className:"SRC_noBorderTop",key:"(".concat(s).concat(a).concat(c,")")},p&&o.createElement("a",{href:"",onClick:n.showGroupRowData(e)},o.createElement("p",{className:"".concat(-1===u?"":"SRC-boldText")},a)),!p&&o.createElement("p",{className:"".concat(-1===u?"":"SRC-boldText")},a)):o.createElement("td",{className:"SRC-hidden",key:"(".concat(s,",").concat(c,")")})}),l=o.createElement("tr",{key:e.rowId},c);a.push(l)}),a}},{key:"createTableHeader",value:function(e,t){var n=this,a=[],r=this.state,i=r.isColumnSelected,s=r.sortedColumnSelection,c=r.columnIconSortState,l=this.props.visibleColumnCount,u=void 0===l?1/0:l;return e.map(function(e,r){var l=r<u&&0===i.length,d=i[r]&&0!==i.length;if(l||d){var m=-1!==n.findSelectionIndex(s,e.name),h=void 0===c[r]?0:c[r],p=t.findIndex(function(t){return n.useFacetAliasIfDefined(t.columnName)===e.name}),f=-1!==p&&"enumeration"===t[p].facetType,g=m?"SRC-selected-table-icon":"SRC-primary-text-color",b="SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover ".concat(m?"SRC-primary-background-color SRC-anchor-light":"");a.push(o.createElement("th",{key:e.name},o.createElement("div",{className:"SRC-centerContent"},o.createElement("span",{style:{whiteSpace:"nowrap"}},e.name),f&&n.configureFacetDropdown(r,t,p),o.createElement("span",{tabIndex:0,className:b,onKeyPress:n.handleColumnSortPress({index:r,name:e.name}),onClick:n.handleColumnSortPress({index:r,name:e.name})},o.createElement(Ot.a,{className:"SRC-primary-background-color-hover  ".concat(g),icon:Bt[h]})))))}else a.push(o.createElement("th",{className:"SRC-hidden",key:e.name}))}),a}},{key:"findSelectionIndex",value:function(e,t){return 0!==e.length?e.findIndex(function(e){return e.column===t}):-1}},{key:"download",value:function(){}},{key:"advancedSearch",value:function(e){e.preventDefault();var t=this.props.getLastQueryRequest().query,n=btoa(JSON.stringify(t)),a=this.props.synapseId;window.open("https://www.synapse.org/#!Synapse:".concat(a,"/tables/query/").concat(n),"_blank")}},{key:"toggleMenuWall",value:function(){var e=this.state,t=e.isOpen,n=e.isFilterSelected;if(t)this.setState({menuWallIsActive:!1});else{for(var a=0;a<n.length;a+=1)n[a]=!1;this.setState({menuWallIsActive:!0})}this.setState({isFilterSelected:n,isOpen:!t})}},{key:"getLengthOfPropsData",value:function(){return this.props.data.queryResult.queryResults.headers.length}},{key:"configureFacetDropdown",value:function(e,t,n){var a=t[n],r=a.columnName,i=this.state.isFilterSelected[e],s=o.createRef(),c=o.createRef(),l=i?"SRC-primary-background-color":"SRC-primary-text-color",u=this.state.filterClassList[e];return o.createElement("div",{ref:c,style:{alignItems:"center",marginLeft:"10px",marginRight:"3px",color:"black",display:"flex"},className:"SRC-table-facet-dropdown btn-group SRC-tableHead ".concat(i?"open SRC-anchor-light":"")},o.createElement("span",{tabIndex:0,className:"SRC-padding SRC-hand-cursor SRC-primary-background-color-hover ".concat(l),onKeyPress:this.toggleFilterDropdown(e,i,c),onClick:this.toggleFilterDropdown(e,i,c),style:{outline:"none"}},o.createElement(Ot.a,{style:{margin:"auto"},size:"1x",className:l,color:i?"white":"",icon:"filter"})),o.createElement("div",{className:"dropdown-menu SRC-minDropdownWidth ".concat(u)},o.createElement("div",{className:"paddingMenuDropdown"},o.createElement("ul",{style:{listStyleType:"none"},className:"scrollable"},o.createElement("br",null),o.createElement("label",{style:{paddingBottom:"8px"},className:"dropdownList SRC-border-bottom-only SRC-overflowWrap SRC-base-font containerCheckbox"},"All",o.createElement("input",{onClick:this.applyChanges({ref:s,columnName:r,selector:qt}),checked:this.props.isAllFilterSelectedForFacet[r],className:"SRC-facet-checkboxes",type:"checkbox"}),o.createElement("span",{className:"checkmark"})),o.createElement("span",{ref:s},this.renderFacetSelection(a,s,r))))))}},{key:"closeMenuClickHandler",value:function(e){var t=this.state.menuWallIsActive,n=Tt(this.state.isFilterSelected),a=Tt(this.state.filterClassList);if(t){for(var r=0;r<n.length;r+=1)n[r]=!1,a[r]="";this.setState({filterClassList:a,isFilterSelected:n,isOpen:!1,menuWallIsActive:!1})}}},{key:"renderFacetSelection",value:function(e,t,n){var a=this,r=this.props,i=r.lastFacetSelection,s=r.isLoading,c=r.isAllFilterSelectedForFacet;return e.facetValues.map(function(e){var r=e.value,l=e.count,u=r;"org.sagebionetworks.UNDEFINED_NULL_NOTSET"===u&&(u="unannotated");var d=n+r+l,m=!c[n]&&Dt({columnName:n,isLoading:s,lastFacetSelection:i,curFacetSelection:e});return o.createElement("li",{key:d},o.createElement("label",{className:"dropdownList SRC-overflowWrap SRC-base-font containerCheckbox"},u,o.createElement("span",{style:{color:"#DDDDDF",marginLeft:"3px"}}," (",l,") "),o.createElement("input",{onChange:a.applyChanges({ref:t,columnName:n,facetValue:r}),checked:m,className:"SRC-facet-checkboxes",type:"checkbox",value:r}),o.createElement("span",{className:"checkmark"})))})}}]),t}(o.Component),Vt=function(e){var t=e.data,n=e.filter,a=e.totalResultsNoFacet,r=e.isLoading,i=e.unitDescription,s=t.facets,c=0;if(n){var l=(void 0===s?[]:s).findIndex(function(e){return"enumeration"===e.facetType&&e.columnName===n}),u=t.facets[l],d=!1,m=0,h=0;if(u){var p=!0,f=!1,g=void 0;try{for(var b,v=u.facetValues[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var S=b.value;d=d||S.isSelected,m+=S.count,h+=S.isSelected?S.count:0}}catch(y){f=!0,g=y}finally{try{p||null==v.return||v.return()}finally{if(f)throw g}}}c=d?h:m,0===t.queryResult.queryResults.rows.length&&(c=0)}else{if(!a)throw Error("Error calculating total, did not specify total for unfaceted view");c=a}return o.createElement("p",{className:"SRC-boldText SRC-text-title SRC-centerContent"},"Displaying ",c," ",i,r&&o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"}))},zt="SELECT_SINGLE_FACET";yt.b.add(Et.s),yt.b.add(Et.n);var Kt=function(e){var t=e.facetColumnResult,n=e.showAllFacets,a=e.lastFacetSelection,r=e.isLoading,i=e.rgbIndex,s=e.isAllFilterSelected,c=[],l=o.createRef();t.facetValues.sort(function(e,t){return t.count-e.count});var u=wt(i,t.facetValues.length),d=u.colorPalette,m=u.textColors;t.facetValues.forEach(function(n,i){var u=t.columnName+n.value+n.count,h=m[i],p=d[i],f={},g=!!s||Dt({isLoading:r,lastFacetSelection:a,columnName:t.columnName,curFacetSelection:n}),b=g?"FACET_SELECTED_CLASS":"FACET_NOT_SELECTED_CLASS";(f=g?{background:p}:{background:"#C4C4C4"}).color=h;var v=n.value,S=n.count,y="org.sagebionetworks.UNDEFINED_NULL_NOTSET"===v?"unannotated":v;c.push(o.createElement("label",{style:f,className:"SRC-facets SRC-primary-background-color-hover SRC-nested-color",key:u},o.createElement("span",{className:"SRC-facets-text"},y," (",S,")"," "),o.createElement("input",{onChange:e.applyChanges(l,v,zt),checked:g,type:"checkbox",value:v,className:"SRC-hidden SRC-facet-checkboxes ".concat(b)})))});var h=c.map(function(e,t){return!(!n&&t>4)&&e});return o.createElement("span",{ref:l},h)},Yt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).applyChanges=function(e,t,a,r){return function(o){o.preventDefault(),n.state.showAllFacets||n.setState({showAllFacets:!0});var i=n.props,s=i.filter,c=void 0===s?"":s,l=i.isAllFilterSelectedForFacet,u=void 0===l?{}:l,d={facetValue:t,selector:a,columnName:c};u[c]=a===qt,n.props.updateParentState({lastFacetSelection:d,isAllFilterSelectedForFacet:u,chartSelectionIndex:r});var m=Array.from(e.current.querySelectorAll(".SRC-facet-checkboxes")),h=n.props.getLastQueryRequest(),p=Mt({htmlCheckboxes:m,queryRequest:h,selector:a,filter:c,value:t}).newQueryRequest;h.query.offset=0,n.props.executeQueryRequest(p)}},n.applyChanges=n.applyChanges.bind(Object(g.a)(n)),n.state={showAllFacets:!1},n.showAllFacets=n.showAllFacets.bind(Object(g.a)(n)),n.showButtons=n.showButtons.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"showFacetFilter",value:function(){var e=this,t=this.props.data.facets.find(function(t){return t.columnName===e.props.filter&&"enumeration"===t.facetType});return o.createElement(Kt,{isAllFilterSelected:this.props.isAllFilterSelectedForFacet[this.props.filter],showAllFacets:this.state.showAllFacets,rgbIndex:this.props.rgbIndex,key:t.columnName,facetColumnResult:t,applyChanges:this.applyChanges,isLoading:this.props.isLoading,lastFacetSelection:this.props.lastFacetSelection})}},{key:"showAllFacets",value:function(e){e.preventDefault(),this.setState({showAllFacets:!0})}},{key:"showButtons",value:function(e,t,n){return e?o.createElement("a",{href:"",className:"SRC-primary-text-color SRC-facet-select-all SRC-no-text-decor",onClick:this.applyChanges(n,"",qt)},"Select All"):o.createElement("a",{href:"",id:"showAllFacetsButton",className:"SRC-primary-text-color SRC-no-text-decor",onClick:this.showAllFacets}," ","Show All (",t,")"," ")}},{key:"render",value:function(){if(!this.props.data)return o.createElement("div",null);var e=this.state.showAllFacets,t=this.props,n=t.data,a=t.filter,r=t.unitDescription,i=t.isLoading,s=t.showBarChart,c=n.facets,l=c.findIndex(function(e){return e.columnName===a&&"enumeration"===e.facetType}),u=c[l];if(!u)return o.createElement("div",null);u.facetValues.length<5&&(e=!0);var d=o.createRef();return o.createElement("div",{className:"SRC-syn-border-spacing"},!s&&o.createElement(Vt,{data:n,filter:a,unitDescription:r,isLoading:i}),o.createElement("form",null,o.createElement("div",{ref:d,className:"SRC-marginFive form-group"},this.showFacetFilter(),o.createElement("span",{className:"SRC-inlineBlock"},this.showButtons(e,u.facetValues.length,d)))))}}]),t}(o.Component),Gt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={},n.calculateRowCount=n.calculateRowCount.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.calculateRowCount()}},{key:"componentDidUpdate",value:function(){this.calculateRowCount()}},{key:"calculateRowCount",value:function(){var e=this,t=this.props,n=t.sql,o=t.token;if(!this.state[n]){var i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:n},partMask:a.BUNDLE_MASK_QUERY_COUNT};r.getQueryTableResults(i,o).then(function(t){e.setState(Object(v.a)({},n,t.queryCount))})}}},{key:"render",value:function(){var e=this.props,t=e.sql,n=e.name,a=this.state[t];return o.createElement(o.Fragment,null," ",n," (",a&&a.toLocaleString(),") ")}}]),t}(o.Component),Jt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).executeInitialQueryRequest=n.executeInitialQueryRequest.bind(Object(g.a)(n)),n.executeQueryRequest=n.executeQueryRequest.bind(Object(g.a)(n)),n.getLastQueryRequest=n.getLastQueryRequest.bind(Object(g.a)(n)),n.getNextPageOfData=n.getNextPageOfData.bind(Object(g.a)(n)),n.updateParentState=n.updateParentState.bind(Object(g.a)(n)),n.state=t.initialState,n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.loadNow;(void 0===e||e)&&this.executeInitialQueryRequest()}},{key:"componentDidUpdate",value:function(e){var t=this.props.loadNow;(void 0===t||t)&&!this.state.loadNowStarted?this.executeInitialQueryRequest():""!==this.props.token&&""===e.token?this.executeInitialQueryRequest():e.initQueryRequest.query.sql!==this.props.initQueryRequest.query.sql&&this.executeInitialQueryRequest()}},{key:"getLastQueryRequest",value:function(){return Tt(this.state.lastQueryRequest)}},{key:"executeQueryRequest",value:function(e){var t=this;this.setState({isLoading:!0}),r.getQueryTableResults(e,this.props.token,this.updateParentState).then(function(n){var r={hasMoreData:n.queryResult.queryResults.rows.length===a.PAGE_SIZE,data:n,isLoading:!1,lastQueryRequest:Tt(e),asyncJobStatus:void 0};t.setState(r)}).catch(function(e){console.log("Failed to get data ",e)})}},{key:"getNextPageOfData",value:function(){var e=Object(pe.a)(ue.a.mark(function e(t){var n=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,Ft(t,this.state.data,this.props.token).then(function(e){n.setState(Object(me.a)({},e,{isLoading:!1,lastQueryRequest:Tt(t)}))});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"executeInitialQueryRequest",value:function(){var e=this;this.setState({isLoading:!0,isLoadingNewData:!0,chartSelectionIndex:0,loadNowStarted:!0}),r.getQueryTableResults(this.props.initQueryRequest,this.props.token,this.updateParentState).then(function(t){var n=Tt(e.props.initQueryRequest),r=t.queryResult.queryResults.rows.length===a.PAGE_SIZE,o=Tt(e.state.isAllFilterSelectedForFacet),i=e.state.chartSelectionIndex;t.facets.forEach(function(t){if("enumeration"===t.facetType){var n=t.facetValues,a=n.every(function(e){return!e.isSelected}),r=n.every(function(e){return e.isSelected}),s=a||r;o[t.columnName]=s,t.columnName!==e.props.facetName||a||(i=n.sort(function(e,t){return t.count-e.count}).findIndex(function(e){return e.isSelected}))}});var s={isAllFilterSelectedForFacet:o,hasMoreData:r,data:t,chartSelectionIndex:i,lastQueryRequest:n,isLoading:!1,isLoadingNewData:!1,asyncJobStatus:void 0};e.setState(s)}).catch(function(e){console.log("Failed to get data ",e)})}},{key:"updateParentState",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=this.state.isLoading,n=this.props.facetAliases,a=void 0===n?{}:n,r=o.Children.map(this.props.children,function(t){return o.cloneElement(t,{facetAliases:a,isAllFilterSelectedForFacet:e.state.isAllFilterSelectedForFacet,data:e.state.data,executeInitialQueryRequest:e.executeInitialQueryRequest,executeQueryRequest:e.executeQueryRequest,getLastQueryRequest:e.getLastQueryRequest,getNextPageOfData:e.getNextPageOfData,isLoading:e.state.isLoading,isLoadingNewData:e.state.isLoadingNewData,filter:e.props.facetName,rgbIndex:e.props.rgbIndex,unitDescription:e.props.unitDescription,updateParentState:e.updateParentState,isQueryWrapperChild:!0,hasMoreData:e.state.hasMoreData,lastFacetSelection:e.state.lastFacetSelection,chartSelectionIndex:e.state.chartSelectionIndex,asyncJobStatus:e.state.asyncJobStatus,showBarChart:e.props.showBarChart})}),i=t?"SRC-logo-cursor":"";return this.props.showMenu,o.createElement("div",{className:"".concat(i)},r)}}]),t}(o.Component);Jt.defaultProps={token:""},Jt.initialState={data:void 0,isLoading:!0,isLoadingNewData:!0,lastQueryRequest:{},hasMoreData:!0,lastFacetSelection:{columnName:"",facetValue:"",selector:""},chartSelectionIndex:0,isAllFilterSelectedForFacet:{},loadNowStarted:!1};var Zt=n(194);yt.b.add(Et.a),yt.b.add(Et.b);var $t="left click",Xt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleClick=function(e){return function(t){n.props.updateParentState({chartSelectionIndex:e.index})}},n.handleArrowClick=function(e){return function(t){var a=n.props.chartSelectionIndex,r=void 0===a?0:a,o=n.extractPropsData(n.props.data),i=Object.keys(o).length;return e===$t?r=(r-=1)<0?i-1:r:r+=1,o=o[r%=i],n.props.updateParentState({chartSelectionIndex:r}),r}},n.handleHover=n.handleHover.bind(Object(g.a)(n)),n.handleExit=n.handleExit.bind(Object(g.a)(n)),n.handleClick=n.handleClick.bind(Object(g.a)(n)),n.handleArrowClick=n.handleArrowClick.bind(Object(g.a)(n)),n.getTextForChartSelection=n.getTextForChartSelection.bind(Object(g.a)(n)),n.onMeasureResize=n.onMeasureResize.bind(Object(g.a)(n)),n.rgba2rgb=n.rgba2rgb.bind(Object(g.a)(n)),n.state={dimensions:{bounds:{height:1,width:1,top:0,left:0,right:0,bottom:0}},selectedFacets:{}},n.extractPropsData=n.extractPropsData.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleHover",value:function(e){e.currentTarget.style.boxShadow="25px 20px"}},{key:"handleExit",value:function(e){e.currentTarget.style.boxShadow=""}},{key:"getTextForChartSelection",value:function(e){var t=this.props.chartSelectionIndex,n=void 0===t?0:t,a=this.props,r=a.facetAliases,i=void 0===r?{}:r,s=a.filter,c=e[n]&&e[n].value,l=i[s]||s;return o.createElement("span",null,o.createElement("span",{className:"SRC-text-title SRC-filter-display"},l)," :",o.createElement("span",{className:"SRC-facet-view SRC-text-title"}," ","org.sagebionetworks.UNDEFINED_NULL_NOTSET"===c?"unannotated":c))}},{key:"getFileCount",value:function(e){var t=this.props.chartSelectionIndex,n=void 0===t?1:t;return e[n]&&e[n].count}},{key:"rgba2rgb",value:function(e,t){var n=t[3];return[Math.floor((1-n)*e[0]+n*t[0]+.5),Math.floor((1-n)*e[1]+n*t[1]+.5),Math.floor((1-n)*e[2]+n*t[2]+.5)]}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.isLoadingNewData,r=t.loadingScreen,i=t.rgbIndex,s=t.filter,l=void 0===s?"":s,u=t.unitDescription,d=t.isLoading,m=t.lastFacetSelection,h=t.isAllFilterSelectedForFacet,p=t.chartSelectionIndex,f=t.asyncJobStatus;if(a)return o.createElement("div",{className:"SRC-loadingContainer SRC-centerContentColumn"},!!r&&r,o.createElement("div",null,f&&f.progressMessage));var g=this.extractPropsData(n),b=0,v=this.state.dimensions.bounds.width;for(var S in g)g.hasOwnProperty(S)&&(b+=g[S].count);var y=wt(i,g.length),E=y.colorPalette,C=y.textColors,R=E[0];return o.createElement(o.Fragment,null,o.createElement("div",{className:"SRC-chart SRC-chart-nav SRC-center-text"},o.createElement("button",{className:"SRC-chart-btn btn btn-default btn-sm SRC-floatRight",onClick:this.handleArrowClick("right click")},o.createElement(Ot.a,{style:{fontSize:"11px"},className:"SRC-primary-text-color",icon:"angle-right"})),o.createElement("button",{className:"SRC-chart-btn btn btn-default btn-sm SRC-floatRight",onClick:this.handleArrowClick($t)},o.createElement(Ot.a,{style:{fontSize:"11px"},className:"SRC-primary-text-color",icon:"angle-left"}))),o.createElement("div",{className:"SRC-bar-border SRC-bar-marginTop SRC-bar-border-top"},o.createElement(Zt.a,{bounds:!0,onResize:function(t){e.setState({dimensions:t})}},function(t){var n=t.measureRef;return o.createElement("div",{className:"SRC-flex",ref:n},g.map(function(t,n){var a,r=C[n],i=E[n];a=!!h[l]||Dt({isLoading:d,lastFacetSelection:m,columnName:l,curFacetSelection:t})?{fill:i}:{fill:"#C4C4C4"};var s=t.count/b*v,c={};p===n&&(c.filter="drop-shadow(5px 5px 5px rgba(0,0,0,0.5))");var f="".concat(l,": ").concat(t.value,"  - ").concat(t.count," ").concat(u),g=t.value.replace(/(\r\n|\n|\r)/gm,""),S=4.5*t.count.toString().length;return o.createElement(o.Fragment,{key:f},o.createElement("span",{"data-for":g,"data-tip":f},o.createElement("svg",{className:"SRC-hoverBox",height:95,width:s,style:c,onClick:e.handleClick(Object(me.a)({},t,{index:n}))},o.createElement("rect",{onMouseEnter:e.handleHover,onMouseLeave:e.handleExit,height:80,width:s,className:"SRC-chart-rect-style",style:a}),n<3&&s>S&&o.createElement("text",{textAnchor:"middle",className:"SRC-text-title",fontFamily:"bold sans-serif",fill:r,x:"50%",y:"50%"},t.count),p===n&&o.createElement("text",{fill:R,x:0,y:95,className:"SRC-text-shadow SRC-text-large"},"\u25be"))),o.createElement(xt.a,{delayShow:1e3,id:g}))}))})),o.createElement("div",{className:"SRC-bar-border SRC-bar-border-bottom"},o.createElement("p",{className:"SRC-noMargin SRC-padding-chart SRC-text-title"},o.createElement("strong",null,this.getTextForChartSelection(g))),o.createElement("p",{id:"fileCount",className:"SRC-noMargin SRC-padding-chart SRC-text-chart"},this.getFileCount(g)," ",u),this.props.link&&o.createElement("div",{className:"SRC-chart-link"},o.createElement(c.a,{to:this.props.link}," ",this.props.linkText," "))))}},{key:"extractPropsData",value:function(e){var t=[],n=this.props.filter;return e.facets.forEach(function(e){"enumeration"===e.facetType&&e.columnName===n&&e.facetValues.forEach(function(n){e.columnName&&t.push(Object(me.a)({columnName:e.columnName},n))})}),t.sort(function(e,t){return t.count-e.count}),t}},{key:"onMeasureResize",value:function(e){this.setState({dimensions:e})}}]),t}(o.Component),en=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function tn(e){if(!e)return"";var t=Math.floor(Math.log(e)/Math.log(1024));return e?(e/Math.pow(1024,t)).toFixed(2)+" "+en[t]:"0 Bytes"}yt.b.add(Et.l),yt.b.add(Et.k);var nn,an=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={isShowMoreOn:!1,isDesktop:!1},n.toggleShowMore=n.toggleShowMore.bind(Object(g.a)(n)),n.updatePredicate=n.updatePredicate.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"toggleShowMore",value:function(){this.setState({isShowMoreOn:!this.state.isShowMoreOn})}},{key:"componentDidMount",value:function(){this.updatePredicate(),window.addEventListener("resize",this.updatePredicate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePredicate)}},{key:"updatePredicate",value:function(){this.setState({isDesktop:window.innerWidth>600})}},{key:"render",value:function(){var e=this.props,t=e.values,n=e.secondaryLabelLimit,a=void 0===n?3:n,r=this.state,i=r.isShowMoreOn,s=r.isDesktop,c=t.filter(function(e){return e[1]}),l=c.length>a;return c=!l||i?c.slice(0,1/0):c.slice(0,a),o.createElement("div",{className:"SRC-cardMetadata"},o.createElement("table",null,o.createElement("tbody",null,s?function(e){return e.map(function(e,t){return"DOI"===e[0].toUpperCase()?o.createElement("tr",{className:"SRC-cardRowDesktop",key:t},o.createElement("td",{className:"SRC-verticalAlignTop SRC-row-label SRC-cardCell"}," ",e[0]," "),o.createElement("td",{className:"SRC-row-data SRC-limitMaxWidth SRC-cardCell"},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://dx.doi.org/".concat(e[1])},e[1]))):o.createElement("tr",{className:"SRC-cardRowDesktop",key:t},o.createElement("td",{className:"SRC-verticalAlignTop SRC-row-label"}," ",e[0]," "),o.createElement("td",{className:"SRC-row-data SRC-limitMaxWidth"}," ",e[1]," "))})}(c):function(e){return e.map(function(e,t){return"DOI"===e[0].toUpperCase()?o.createElement(o.Fragment,{key:t},o.createElement("tr",{className:"SRC-cardRowMobile"},o.createElement("td",{className:"SRC-verticalAlignTop SRC-row-label"}," ",e[0]," ")),o.createElement("tr",{className:"SRC-cardRowMobile"},o.createElement("td",{className:"SRC-row-data SRC-limitMaxWidth"},o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://dx.doi.org/".concat(e[1])},e[1])))):o.createElement(o.Fragment,{key:t},o.createElement("tr",{className:"SRC-cardRowMobile"},o.createElement("td",{className:"SRC-verticalAlignTop SRC-row-label"}," ",e[0]," ")),o.createElement("tr",{className:"SRC-cardRowMobile"},o.createElement("td",{className:"SRC-row-data SRC-limitMaxWidth"}," ",e[1]," ")))})}(c),l&&o.createElement("tr",{className:"SRC-cardRow"},o.createElement("td",null,o.createElement("button",{style:{textAlign:"left",margin:0,padding:0},className:"SRC-primary-text-color SRC-basicButton",onClick:this.toggleShowMore},"Show ",i?"Less":"More",o.createElement(Ot.a,{style:{marginLeft:"5px"},icon:i?"long-arrow-alt-up":"long-arrow-alt-down"})))))))}}]),t}(o.Component),rn=function(e){var t=e.chips.map(function(e,t){return!!e&&o.createElement("span",{key:t}," ",e)});return o.createElement(o.Fragment,null,t)},on=n(166),sn=n.n(on),cn=n(104),ln=n.n(cn),un=n(167),dn=n.n(un),mn=n(168),hn=n.n(mn),pn=n(169),fn=n.n(pn),gn=n(170),bn=n.n(gn),vn=n(171),Sn=n.n(vn),yn=n(172),En=n.n(yn),Cn=n(173),Rn=n.n(Cn),kn=n(66),wn=n.n(kn),On=(nn={},Object(v.a)(nn,K,sn.a),Object(v.a)(nn,W,ln.a),Object(v.a)(nn,z,ln.a),Object(v.a)(nn,H,dn.a),Object(v.a)(nn,Q,fn.a),Object(v.a)(nn,B,hn.a),Object(v.a)(nn,Y,bn.a),Object(v.a)(nn,te,Rn.a),Object(v.a)(nn,ee,En.a),Object(v.a)(nn,ne,Sn.a),Object(v.a)(nn,ae,wn.a),nn),Nn=function(e){var t=e.type,n=e.value,a=void 0===n?"":n,r=e.iconOptions,i=Object(me.a)({},On,r),s=i[a]||i[t],c=a===W||t===W?"SRC-datasetIcon":"";return o.createElement("img",{className:"iconImg  ".concat(c),src:s})},xn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={showMore:!1},n.toggleShowMore=n.toggleShowMore.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"toggleShowMore",value:function(e){e.preventDefault();var t=this.state.showMore;t=!t,this.props.onClick({showMore:t}),this.setState({showMore:t})}},{key:"render",value:function(){var e=this.props.summary,t="",n=e&&e.length>=400;if(!this.state.showMore&&n)for(var a=e.split(" "),r=0;t.length<400;)t+="".concat(a[r]," "),r+=1;else n||(t=e);var i=n&&o.createElement("a",{style:{fontSize:"14px",cursor:"pointer"},className:"SRC-primary-text-color",onClick:this.toggleShowMore},"...Show More"," ");return o.createElement(o.Fragment,null,!this.state.showMore&&t,this.state.showMore&&e,!this.state.showMore&&i)}}]),t}(o.Component),Ln=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleLinkClick=function(e){return function(t){t.preventDefault(),window.open("https://www.synapse.org/#!Synapse:".concat(e),"_blank")}},n.handleLinkClick=n.handleLinkClick.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.datasetName],r=t[n.summary],i=t[n.tumorType],s=t[n.diseaseFocus],c=t[n.id],l=t[n.fundingAgency],u=t[n.fileCount],d=tn(t[n.fileSize]),m=[["FUNDER",l],["SIZE",d],["FILES",u]];return o.createElement("div",{className:"SRC-portalCard SRC-typeDataset  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{type:W}),o.createElement("div",null,d)),o.createElement("div",{className:"SRC-cardContent SRC-dataset"},o.createElement("div",{className:"SRC-type"},"Dataset "),o.createElement("div",{className:"SRC-title"},o.createElement("h3",null,o.createElement("a",{target:"_self",href:"https://www.synapse.org/#!Synapse:".concat(c)},a))),o.createElement("div",{className:"SRC-description-dataset"},o.createElement("p",{className:"SRC-description-text"},r),o.createElement("div",{className:"SRC-cardAction"},o.createElement("button",{className:"SRC-datasetButton",onClick:this.handleLinkClick(c),type:"button"},"Download Dataset"))),o.createElement("div",{className:"SRC-cardAnnotations"},o.createElement(rn,{chips:[i,s]}))),o.createElement(an,{secondaryLabelLimit:this.props.secondaryLabelLimit,values:m}))}}]),t}(o.Component),In=n(174),Tn=n.n(In),Fn=n(175),Dn=n.n(Fn),Mn=n(176),jn=n.n(Mn),An={CTF:Tn.a,"DHART SPORE":Dn.a,NTAP:jn.a},Pn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleLinkClick=function(e){return function(t){t.preventDefault(),window.open(e,"_blank")}},n.handleLinkClick=n.handleLinkClick.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.organizationName],r=t[n.organizationPath],i=t[n.summary],s=t[n.website],c=t[n.abbreviation],l=An[c],u="".concat(window.location.origin,"/#").concat(r),d=s.replace("https://","");"/"===(d=d.replace("http://","")).charAt(d.length-1)&&(d=d.substring(0,d.length-1));var m,h=window.location.hash.substring(1)===r,p={};return h?p.paddingBottom="42px":m=o.createElement("div",{className:"SRC-marginAuto SRC-cardAction"},o.createElement("button",{onClick:this.handleLinkClick(u),type:"button"},"View Funded Research")),o.createElement("div",{className:"SRC-portalCard SRC-typeFunder ",style:p},o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Organization"),o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement("img",{alt:"funder logo",className:"SRC-logo",src:l})),o.createElement("div",{className:"SRC-title"},o.createElement("h3",null,h&&a,!h&&o.createElement("a",{href:u},a))),o.createElement("div",{className:"SRC-website"},o.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:s},d)),o.createElement("div",{className:"SRC-description"},i)),m)}}]),t}(o.Component),_n=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={showMore:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.citation],r=t[n.tumorType],i=t[n.diseaseFocus],s=t[n.doi],c=[["DOI",s],["FUNDER",t[n.fundingAgency]],["STUDY",t[n.projectName]]];return o.createElement("div",{className:"SRC-portalCard SRC-typePublication  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{type:K})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Publication"),o.createElement("div",{className:"SRC-title"},o.createElement("h3",null,o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://dx.doi.org/".concat(s)},a))),o.createElement("div",{className:"SRC-cardAnnotations"},o.createElement(rn,{chips:[r,i]}))),o.createElement(an,{secondaryLabelLimit:this.props.secondaryLabelLimit,values:c}))}}]),t}(o.Component),Un=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={hasCreatedIndex:!1,showMore:!1},n.handleClick=n.handleClick.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleClick",value:function(e){this.setState({showMore:!this.state.showMore})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.projectName],r=t[n.projectLeads]&&t[n.projectLeads].split(";").join(" / "),i=t[n.summary],s=t[n.diseaseFocus],c=t[n.tumorType],l=t[n.projectStatus],u=t[n.fundingAgency],d=t[n.dataStatus],m=t[n.id],h="https://www.synapse.org/#!Synapse:".concat(m),p=[["STATUS",l],["FUNDER",u],["DATA",d]],f=[c,s];return o.createElement("div",{className:"SRC-portalCard SRC-typeStudy  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{type:"Active"===l?H:Q}),o.createElement("div",null,l)),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Study"),o.createElement("div",{className:"SRC-title"}," ",o.createElement("h3",null," ",o.createElement("a",{target:"_self",href:h},a)," ")," "),o.createElement("div",{className:"SRC-author"},r),o.createElement("span",{className:"SRC-font-size-base"},o.createElement(xn,{onClick:this.handleClick,summary:i})),o.createElement("div",{className:"SRC-cardAnnotations"},o.createElement(rn,{chips:f}))),o.createElement(an,{secondaryLabelLimit:this.props.secondaryLabelLimit,values:p}))}}]),t}(o.Component),qn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleLinkClick=function(e){return function(t){t.preventDefault(),window.open(e,"_blank")}},n.handleLinkClick=n.handleLinkClick.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.softwareName],r=t[n.summary],i=t[n.softwareLink];return o.createElement("div",{className:"SRC-portalCard SRC-typeTool  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{type:Y})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Tool"),o.createElement("div",{className:"SRC-title"},o.createElement("h3",null,o.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},a))),o.createElement("div",{className:"SRC-description"},r)),o.createElement("div",{className:"SRC-cardAction"},o.createElement("button",{onClick:this.handleLinkClick(i),type:"button"},"Open Tool")))}}]),t}(o.Component),Bn=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={hasCreatedIndex:!1,showMore:!1},n.handleClick=n.handleClick.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleClick",value:function(e){this.setState({showMore:!this.state.showMore})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.summary],r=t[n.grantNumber],i=t[n.keyInvestigators],s="https://www.synapse.org/#!Synapse:".concat(t[n.id]),c=t[n.name],l="".concat(t[n.grantType]," | ").concat(t[n.institution]),u=t[n.consortium],d=[[]];return r&&d.push(["GRANT",r]),i&&d.push(["INVESTIGATORS",i]),u&&d.push(["PROGRAM",u]),o.createElement("div",{className:"SRC-portalCard SRC-typeStudy  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement("img",{className:"iconImg",alt:"",src:wn.a})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Project"),o.createElement("div",{className:"SRC-title"},o.createElement("h3",null,o.createElement("a",{className:"SRC-primary-text-color",target:"_self",href:s},c))),o.createElement("div",{className:"SRC-author"},l),o.createElement("span",{className:"SRC-font-size-base"},o.createElement(xn,{onClick:this.handleClick,summary:a}))),o.createElement(an,{secondaryLabelLimit:this.props.secondaryLabelLimit,values:d}))}}]),t}(o.Component),Hn=n(177),Qn=n.n(Hn),Wn=n(178),Vn=n.n(Wn),zn=n(179),Kn=n.n(zn),Yn=n(180),Gn=n.n(Yn),Jn=n(181),Zn=n.n(Jn),$n=n(182),Xn=n.n($n),ea=n(183),ta=n.n(ea),na=n(184),aa=n.n(na),ra=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={showMore:!1},n.handleClick=n.handleClick.bind(Object(g.a)(n)),n.getIcon=n.getIcon.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleClick",value:function(e){this.setState({showMore:!this.state.showMore})}},{key:"getIcon",value:function(e,t){switch(e){case"AMP-AD":return t?o.createElement("img",{alt:"amp-ad icon",src:Qn.a}):o.createElement("img",{alt:"amp-ad icon",src:Vn.a});case"M2OVE-AD":return t?o.createElement("img",{alt:"M2OVE icon",src:Kn.a}):o.createElement("img",{alt:"M2OVE icon",src:Gn.a});case"MODEL-AD":return t?o.createElement("img",{alt:"Model icon",src:Zn.a}):o.createElement("img",{alt:"Model icon",src:Xn.a});case"Resilience-AD":return t?o.createElement("img",{alt:"Resillience icon",src:ta.a}):o.createElement("img",{alt:"Resillience icon",src:aa.a});default:return!1}}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n["Short Description"]],r=t[n["Full Name"]],i=t[n.Program],s=t[n.Path],c="".concat(window.location.origin,"/#").concat(s),l=window.location.hash.substring(1)===s;return o.createElement("div",{style:{paddingBottom:"32px"},className:"SRC-portalCard SRC-typeStudy  "},o.createElement("div",{className:"SRC-cardThumbnail"},this.getIcon(i,l)),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Program"),o.createElement("div",{className:"SRC-title"},o.createElement("h3",null,!l&&o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c}," ",r," "),l&&r)),o.createElement("span",{className:"SRC-font-size-base"},a)))}}]),t}(o.Component),oa=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={showMore:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.Title],r=t[n.Authors],i=t[n.experimentalStrategy],s=t[n.doi],c=t[n.Consortum],l=t[n.datasets],u=[["Journal",t[n.Journal]],["Publication Year",t[n["Publication Year"]]],["Consortium",c],["Grant Type",t[n.grantType]],["Theme",t[n.Theme]],["Disease",t[n.diseaseType]],["Assay",i],["datasets",l],["studies",t[n.studies]]];return o.createElement("div",{className:"SRC-portalCard SRC-typePublication  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{type:K})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Publication"),o.createElement("div",{className:"SRC-title"},o.createElement("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"}},s&&o.createElement("a",{className:"SRC-primary-text-color",rel:"noopener noreferrer",target:"_blank",href:s?"https://dx.doi.org/".concat(s):void 0},a),!s&&a)),o.createElement("p",null,o.createElement("i",null,r))),o.createElement(an,{secondaryLabelLimit:this.props.secondaryLabelLimit,values:u}))}}]),t}(o.Component),ia=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={showMore:!1},n.handleClick=n.handleClick.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleClick",value:function(e){this.setState({showMore:!this.state.showMore})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.name],r=t[n.experimentalStrategy],i=t[n.consortium],s=t[n.tumorType],c=t[n.centerName],l=t[n.grantType],u=t[n.Theme],d=t[n.id],m=t[n.description],h=[["Theme",u],["Assay",r],["Disease Type",s],["Grant Type",l],["Program",i]];return o.createElement("div",{className:"SRC-portalCard SRC-typePublication  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{type:B})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"}," Study "),o.createElement("div",{className:"SRC-title"},o.createElement("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"}},d&&o.createElement("a",{className:"SRC-primary-text-color",target:"_self",href:d?"https://www.synapse.org/#!Synapse:".concat(d):void 0},a),!d&&a)),o.createElement("div",{className:"SRC-author"}," ",c," "),o.createElement("span",{className:"SRC-font-size-base"},m)),o.createElement(an,{values:h}))}}]),t}(o.Component),sa=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.name],r=t[n.experimentalStrategy],i=t[n.consortium],s=t[n.platform],c=t[n.tumorType],l=t[n.centerName],u=t[n.grantType],d=t[n.Theme],m=t[n.id],h=t[n.summary],p=t[n.species],f=tn(t[n.fileSize]),g=[["Disease Type",c],["Assay",r],["Platform",s],["Theme",d],["Species",p],["Program",i],["Grant Type",u],["Grant",l]];return o.createElement("div",{className:"SRC-portalCard  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{type:W}),o.createElement("div",null,f)),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Dataset "),o.createElement("div",{className:"SRC-title"},o.createElement("h3",null,o.createElement("a",{target:"_self",href:"https://www.synapse.org/#!Synapse:".concat(m)},a))),o.createElement("div",{className:"SRC-downloadData SRC-floatRight"},o.createElement("a",{className:"download",href:"https://www.synapse.org/#!Synapse:".concat(m)},"Download Dataset")),o.createElement("div",{className:"SRC-description"}," ",h," ")),o.createElement(an,{secondaryLabelLimit:this.props.secondaryLabelLimit,values:g}))}}]),t}(o.Component),ca=function(e){var t=e.type,n=e.title,a=e.subTitle,r=e.description,i=e.iconOptions,s=e.iconValue,c=e.backgroundColor,l=e.values,u=e.secondaryLabelLimit,d={background:c};return o.createElement("div",{style:d,className:"SRC-portalCardHeader"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-1 iconContainer"},o.createElement(Nn,{value:s,iconOptions:i,type:t})),o.createElement("div",{className:"SRC-cardContent col-md-10"},o.createElement("div",{className:"SRC-type"},t),o.createElement("div",{className:"SRC-title"},o.createElement("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"}},n)),a&&o.createElement("div",{className:"SRC-author"}," ",a," "),o.createElement("span",{className:"SRC-font-size-base"},r),o.createElement("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}},l&&o.createElement(an,{secondaryLabelLimit:u,values:l}))))))},la=/^10.\d{4,9}\/[-._;()\/:a-z0-9]+$/,ua=/syn\d+$/,da=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).toggleShowMoreDescription=function(e){n.setState({showMoreDescription:!n.state.showMoreDescription})},n.state={showMoreDescription:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"getLink",value:function(e,t,n,a){var r=e,o="_self";if(e.match(ua))r="https://www.synapse.org/#!Synapse:".concat(e);else if(e.match(la))o="_blank",r="https://dx.doi.org/".concat(e);else if(t){if(t){if(!n||!a)throw Error("Must specify internalLinkConfiguration and data for linking to work");var i=t.columnValues.length,s=t.columnValues.map(function(e,t){a.hasOwnProperty(e)||console.error("Could not find match for data: ".concat(n," with columnName ").concat(e));var r=t<i-1?"&":"";return"".concat(e,"=").concat(n[a[e]]).concat(r)}).join("");r="#/".concat(t.baseURL,"?").concat(s)}}else o="_blank";return{linkDisplay:r,target:o}}},{key:"render",value:function(){var e=this.props,t=e.schema,n=e.data,a=e.genericCardSchema,r=e.secondaryLabelLimit,i=e.backgroundColor,s=e.iconOptions,c=e.isHeader,l=void 0!==c&&c,u=e.internalLinkConfiguration,d=a.link,m=void 0===d?"":d,h=a.type,p=n[t[a.title]],f=a.subTitle&&n[t[a.subTitle]],g=n[t[a.description||""]],b=n[t[a.icon||""]],v=n[t[m]]||"",S=this.getLink(v.toLowerCase(),u,n,t),y=S.linkDisplay,E=S.target,C=[];if(a.secondaryLabels)for(var R=0;R<Object.keys(a.secondaryLabels).length;R+=1){if(!a.secondaryLabels[R])throw Error("Keys in genericCardSchema.secondaryLabels must be sequential, missing key: ".concat(R));var k=a.secondaryLabels[R],w=k.key,O=k.alias,N=void 0===O?"":O,x=[N||w,n[t[w]]];C.push(x)}var L={background:i,marginTop:l?"0px":void 0,marginBottom:l?"0px":void 0};return l?o.createElement(ca,{type:h,title:p,subTitle:f,backgroundColor:i,description:g,iconValue:b,iconOptions:s,values:C,secondaryLabelLimit:r}):o.createElement("div",{style:L,className:"SRC-portalCard"},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Nn,{iconOptions:s,value:b,type:h})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},h),o.createElement("div",{className:"SRC-title"},o.createElement("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"}},y?o.createElement("a",{className:"SRC-primary-text-color",target:E,href:y},p):p)),f&&o.createElement("div",{className:"SRC-author"}," ",f," "),g&&o.createElement("span",{className:"SRC-font-size-base"},o.createElement(xn,{onClick:this.toggleShowMoreDescription,summary:g}))),a.secondaryLabels&&o.createElement(an,{secondaryLabelLimit:r,values:C}))}}]),t}(o.Component);function ma(e,t){return r.getUserProfiles(e).then(function(e){var n=e.list.filter(function(e){return void 0!==e.profilePicureFileHandleId});if(0===n.length)return e;var a={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:n.map(function(e){return{associateObjectId:e.ownerId,associateObjectType:"UserProfileAttachment",fileHandleId:e.profilePicureFileHandleId}})};return r.getFiles(a,t).then(function(t){return t.requestedFiles.forEach(function(t){var n=e.list.findIndex(function(e){return t.fileHandleId===e.profilePicureFileHandleId});e.list[n].clientPreSignedURL=t.preSignedURL}),Promise.resolve(e)}).catch(function(e){return e})})}function ha(e,t){return r.getUserProfileById(t,e).then(function(n){if(!n.profilePicureFileHandleId)return Promise.resolve({userProfile:n});var a={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:e,associateObjectType:"UserProfileAttachment",fileHandleId:n.profilePicureFileHandleId}]};return r.getFiles(a,t).then(function(e){var t=e.requestedFiles[0];return Promise.resolve({userProfile:n,preSignedURL:t.preSignedURL})}).catch(function(e){console.log({err:e})})})}var pa=["chocolate","black","firebrick","maroon","olive","green","forestgreen","darkturquoise","teal","blue","navy","darkmagenta","purple","blue","orangered","blueviolet"],fa=function(e){var t=function(e){var t=e.split("").reduce(function(e,t){return(e<<5)-e+t.charCodeAt(0)|0},0);return Math.abs(t)}(e);return pa[t%pa.length]};yt.b.add(Et.e);var ga=function(e){var t,n,a=e.userProfile,r=e.hideText,i=void 0!==r&&r,s=e.hideTooltip,c=void 0!==s&&s,l=e.preSignedURL,u=e.link,d=u||"https://www.synapse.org/#!Profile:".concat(a.ownerId),m="";if(c||(a.displayName?m+=a.displayName:a.firstName&&a.lastName&&(m+="".concat(a.firstName," ").concat(a.lastName)),a.userName&&(m+=" (".concat(a.userName,")")),a.position&&(m+=" <br/>".concat(a.position)),a.location&&(m+=" <br/>".concat(a.location))),l)n="3px",t=o.createElement("div",{className:"SRC-userImgSmall",style:{backgroundImage:"url(".concat(l,")")},"data-for":m,"data-tip":m});else{var h=fa(a.userName);n="3px",t=o.createElement("div",{style:{background:h},className:"SRC-userImgSmall SRC-centerContentInline"},a.firstName&&a.firstName[0]||a.userName[0])}return o.createElement("a",{href:d,className:"SRC-userCard SRC-primary-text-color SRC-no-underline-on-hover"},t,o.createElement(xt.a,{delayShow:1e3,id:m,multiline:!0}),!i&&o.createElement("span",{className:"SRC-primary-text-color SRC-underline-on-hover",style:{marginLeft:n,whiteSpace:"nowrap"}},"@".concat(a.userName)))},ba=function(e){var t=e.menuActions,n=void 0===t?[]:t,a=e.userProfile;return o.createElement("div",{className:"dropdown open"},o.createElement("ul",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu1"},n.map(function(e,t){var n=function(){return e.callback(a)};return e.field===ce?o.createElement("hr",{className:"SRC-break",key:e.field+t}):o.createElement("li",{key:e.field,style:{listStyle:"none"},className:" SRC-menu-item SRC-table-dropdown-list SRC-primary-background-color-hover SRC-nested-color ",onClick:n,onKeyPress:n},o.createElement("a",{role:"button",tabIndex:0,className:"SRC-menuAction"},e.field))})))};function va(e){var t=e.userProfile,n=t.summary,a=t.industry,r=t.location,i=t.url;return o.createElement("div",{className:"SRC-cardMetaData"},n&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," Bio "),o.createElement("p",null,n)),i&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," More Info "),o.createElement("p",null,i)),a&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," Industry "),o.createElement("p",null,a)),r&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," Location "),o.createElement("p",null,r)))}yt.b.add(Et.e),yt.b.add(Et.i),yt.b.add(Et.g);var Sa=o.createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M10.7368 12.7273H3.78947V3.81818H10.7368V12.7273ZM10.7368 2.54545H3.78947C3.45446 2.54545 3.13317 2.67954 2.89629 2.91823C2.6594 3.15691 2.52632 3.48063 2.52632 3.81818V12.7273C2.52632 13.0648 2.6594 13.3885 2.89629 13.6272C3.13317 13.8659 3.45446 14 3.78947 14H10.7368C11.0719 14 11.3931 13.8659 11.63 13.6272C11.8669 13.3885 12 13.0648 12 12.7273V3.81818C12 3.48063 11.8669 3.15691 11.63 2.91823C11.3931 2.67954 11.0719 2.54545 10.7368 2.54545V2.54545ZM8.8421 0H1.26316C0.928148 0 0.606858 0.134091 0.36997 0.372773C0.133082 0.611456 0 0.935179 0 1.27273V10.1818H1.26316V1.27273H8.8421V0Z",fill:"#DCDCDC"}));yt.b.add(Et.e),yt.b.add(Et.i),yt.b.add(Et.g);var ya=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).htmlDivRef=o.createRef(),n.copyToClipboard=function(e){return function(t){t.preventDefault();var a=document.createElement("textarea");a.value=e,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",n.htmlDivRef.current.appendChild(a),a.select(),document.execCommand("copy"),n.htmlDivRef.current.removeChild(a),n.setState({showModal:!0}),setTimeout(function(){n.setState({showModal:!1})},4e3)}},n.toggleContextMenu=function(e){n.setState({isContextMenuOpen:!n.state.isContextMenuOpen})},n.pageClick=function(e){n.state.isContextMenuOpen&&setTimeout(function(){n.state.isContextMenuOpen&&n.toggleContextMenu(e)},10)},n.state={showModal:!1,isContextMenuOpen:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.pageClick,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.pageClick,!1)}},{key:"render",value:function(){var e,t=this.props,n=t.userProfile,a=t.menuActions,r=t.isLarge,i=void 0!==r&&r,s=t.preSignedURL,c=t.hideEmail,l=void 0!==c&&c,u=t.disableLink,d=void 0!==u&&u,m=t.link,h=this.state,p=h.isContextMenuOpen,f=h.showModal,g=n.displayName,b=n.userName,v=n.firstName,S=n.lastName,y=n.position,E=n.company,C="",R=m||"https://www.synapse.org/#!Profile:".concat(n.ownerId),k="".concat(b,"@synapse.org");g?C=g:v&&S?C="".concat(v," ").concat(S):b&&(C=b),e=s?o.createElement("div",{style:{backgroundImage:"url(".concat(s,")")},className:"SRC-userImg"}):o.createElement("div",{style:{background:fa(b)},className:"SRC-userImg SRC-centerContentInline"},n.firstName&&(n.firstName[0]||n.userName[0]));var w=o.createElement(o.Fragment,null,!l&&o.createElement(Ct.TransitionGroup,null,f&&o.createElement(Ct.CSSTransition,{key:k,classNames:"SRC-card",timeout:{enter:500,exit:300}},o.createElement("div",{key:k,className:"SRC-modal"}," Email address copied to clipboard "))),d&&e,!d&&o.createElement("a",{href:R,className:"SRC-no-underline-on-hover ".concat(i?"SRC-isLargeCard":"")},e),o.createElement("div",{className:"SRC-cardContent"},o.createElement("p",{className:"SRC-eqHeightRow SRC-userCardName"},i||d?o.createElement("span",{className:i?"SRC-whiteText":"SRC-blackText"}," ",C," "):o.createElement("a",{href:R,tabIndex:0,className:"SRC-hand-cursor SRC-primary-text-color"},C)),(y||E)&&o.createElement("p",{className:"".concat(i?"SRC-whiteText":"")},y," ",y?" / ":""," ",E),!l&&o.createElement("p",{className:"".concat(i?"SRC-whiteText":"SRC-primary-text-color SRC-primary-color-hover","\n              SRC-hand-cursor SRC-eqHeightRow SRC-inlineFlex SRC-emailText SRC-cardSvg"),onClick:this.copyToClipboard(k),onKeyPress:this.copyToClipboard(k),tabIndex:0,ref:this.htmlDivRef},o.createElement("span",{style:{paddingRight:"5px"}},"".concat(b,"@synapse.org")),Sa)),a&&o.createElement("span",{className:"SRC-extraPadding SRC-hand-cursor SRC-primary-background-color-hover SRC-inlineBlock\n            SRC-cardMenuButton ".concat(p?"SRC-primary-background-color":""),style:{outline:"none"},tabIndex:0,onClick:this.toggleContextMenu,onKeyPress:this.toggleContextMenu},o.createElement(Ot.a,{className:p||i?"SRC-whiteText":"SRC-primary-text-color",icon:"ellipsis-v",fixedWidth:!0}),p&&o.createElement(ba,{menuActions:a,userProfile:n})),!a&&o.createElement("span",{style:{padding:"0px 0px 0px 35px"}}));return i?o.createElement("div",{style:{boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"},className:p?"SRC-hand-cursor":"",onClick:p?this.toggleContextMenu:void 0},o.createElement("div",{className:"SRC-primary-background-color SRC-userCard SRC-userCardMediumUp ".concat(p?"SRC-hand-cursor":"")},w),!!i&&o.createElement(va,{userProfile:n})):o.createElement("div",{style:{border:"1px solid #DDDDDF"},className:"SRC-userCard SRC-userCardMediumUp ".concat(p?"SRC-hand-cursor":""),onClick:p?this.toggleContextMenu:void 0},w)}}]),t}(o.Component),Ea=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={userProfile:void 0,isLoading:!0,preSignedURL:""},n.getUserProfile=n.getUserProfile.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.userProfile,a=t.ownerId,r=t.alias;n||(r?at("",r,"USER_NAME").then(function(t){e.getUserProfile(t.principalId)}):this.getUserProfile(a))}},{key:"getUserProfile",value:function(e){var t=this;ha(e,"").then(function(e){var n=e.userProfile,a=e.preSignedURL;t.setState({userProfile:n,preSignedURL:a,isLoading:!1})}).catch(function(e){console.log("failed to get user bundle ",e)})}},{key:"render",value:function(){var e,t,n=this.props,r=n.userProfile,i=n.loadingScreen,s=void 0===i?o.createElement("span",null):i,c=n.preSignedURL,l=n.size,u=Object(he.a)(n,["userProfile","loadingScreen","preSignedURL","size"]);if(r)e=r,t=c;else{if(this.state.isLoading)return s;e=this.state.userProfile,t=this.state.preSignedURL}var d=Object(me.a)({userProfile:e,preSignedURL:t},u);switch(l){case a.SMALL_USER_CARD:return o.createElement(ga,d);case a.MEDIUM_USER_CARD:return o.createElement(ya,d);case a.LARGE_USER_CARD:return o.createElement(ya,Object.assign({isLarge:!0},d));default:return o.createElement("span",null)}}}]),t}(o.Component),Ca=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={userProfileMap:{}},n.update=n.update.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.list;this.update(e)}},{key:"difference",value:function(e,t){for(var n=new Set(e),a=0,r=Array.from(t);a<r.length;a++){var o=r[a];n.delete(o)}return n}},{key:"componentDidUpdate",value:function(e){var t=new Set(e.list),n=new Set(this.props.list.filter(function(e){return e}));if(this.difference(n,t).size>0){var a=new Set(Object.keys(this.state.userProfileMap)),r=Array.from(this.difference(n,a));r.length>0&&this.update(r)}}},{key:"update",value:function(e){var t=this;ma(e.filter(function(e){return e})).then(function(e){var n={};e.list.forEach(function(e){var t=e.ownerId;n[t]=e}),t.setState({userProfileMap:Object(me.a)({},t.state.userProfileMap,n)})}).catch(function(e){console.log("Error on batch call =",e)})}},{key:"manuallyExtractData",value:function(e){var t=e.queryResult.queryResults.headers.findIndex(function(e){return"firstName"===e.name}),n=e.queryResult.queryResults.headers.findIndex(function(e){return"lastName"===e.name}),a=e.queryResult.queryResults.headers.findIndex(function(e){return"institution"===e.name}),r=e.queryResult.queryResults.headers.findIndex(function(e){return"USERID"===e.columnType});return e.queryResult.queryResults.rows.filter(function(e){return!e.values[r]}).map(function(e){var r=e.values;return{firstName:r[t],lastName:r[n],company:r[a],ownerId:"",userName:r[t][0]}})}},{key:"render",value:function(){var e=this.props,t=e.size,n=void 0===t?ie:t,a=e.data,r=e.list,i=this.state.userProfileMap,s=void 0===i?{}:i,c=a&&this.manuallyExtractData(a),l=0;return o.createElement("div",{className:"SRC-card-grid-row SRC-adjust-for-bootstrap-margin"},r.map(function(e){var t=s[e];if(t)return o.createElement("div",{key:JSON.stringify(t),className:"SRC-grid-item SRC-narrow-grid-item"},o.createElement(Ea,{size:n,preSignedURL:t.clientPreSignedURL,userProfile:t}));var a=c&&c[l];return!!a&&(l+=1,o.createElement("div",{key:JSON.stringify(a),className:"SRC-grid-item SRC-narrow-grid-item"},o.createElement(Ea,{disableLink:!0,hideEmail:!0,size:n,userProfile:a})))}))}}]),t}(o.Component),Ra=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).renderCard=function(e,t){switch(t){case B:return o.createElement(Un,e);case W:return o.createElement(Ln,e);case z:return o.createElement(Pn,e);case K:return o.createElement(_n,e);case Y:return o.createElement(qn,e);case V:return o.createElement(ra,e);case G:return o.createElement(Bn,e);case J:return o.createElement(oa,e);case Z:return o.createElement(ia,e);case $:return o.createElement(sa,e);case X:return o.createElement(da,e);default:return o.createElement("div",null)}},n.handleViewMore=n.handleViewMore.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"handleViewMore",value:function(){var e=this.props.getLastQueryRequest(),t=e.query.offset;t+=25,e.query.offset=t,this.props.getNextPageOfData(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.limit,r=void 0===a?1/0:a,i=t.isHeader,s=void 0!==i&&i,c=t.filter,l=t.unitDescription,u=t.type,d=t.isLoading,m=t.loadingScreen,h=t.secondaryLabelLimit,p=void 0===h?3:h,f=t.genericCardSchema,g=t.backgroundColor,b=t.iconOptions,v=t.internalLinkConfiguration,S=t.showBarChart,y=void 0===S||S;if(!n)return o.createElement("div",null,d&&m);var E={};n.queryResult.queryResults.headers.forEach(function(e,t){E[e.name]=t});var C,R=r>=25&&n.queryResult.queryResults.rows.length>=25,k=(R=R&&this.props.hasMoreData)&&o.createElement("div",null,o.createElement("button",{onClick:this.handleViewMore,className:"pull-right SRC-primary-background-color-hover SRC-next-color SRC-viewMoreButton"},"View More"));if(u===ie){var w=n.queryResult.queryResults.headers.findIndex(function(e){return"USERID"===e.columnType});if(-1===w)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");var O=n.queryResult.queryResults.rows.map(function(e){return e.values[w]});C=o.createElement(Ca,{data:n,list:O,size:ie})}else C=n.queryResult.queryResults.rows.map(function(t,n){if(n<r){var a={key:JSON.stringify(t.values),type:u,internalLinkConfiguration:v,schema:E,isHeader:s,genericCardSchema:f,secondaryLabelLimit:p,backgroundColor:g,iconOptions:b,data:t.values};return e.renderCard(a,u)}return!1});return o.createElement("div",null,l&&y&&o.createElement(Vt,{data:n,filter:c,unitDescription:l,isLoading:d}),C,k)}}]),t}(o.Component);yt.b.add(Et.a),yt.b.add(Et.b),yt.b.add(Et.m),yt.b.add(Et.n);var ka=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleHoverLogic=function(e){return function(t){e.isSelected||"DIV"!==t.currentTarget.tagName||(t.currentTarget.style.backgroundColor=e.originalColor,e.hoverWhiteTextClass?t.currentTarget.classList.add(e.hoverWhiteTextClass):t.currentTarget.classList.remove("SRC-hoverWhiteText"))}},n.switchFacet=function(e,t){return function(a){var r=n.state,o=r.activeMenuIndex;r.lastAccordionIndexWithSelection===t&&o===e||n.setState({activeMenuIndex:e,lastAccordionIndexWithSelection:t}),n.state.hasClickedMenuItemOnce||n.setState({hasClickedMenuItemOnce:!0})}},n.toggleSelectionLevel=function(e){return function(t){n.state.visibleAccordionIndex===e?n.setState({visibleAccordionIndex:void 0}):n.setState({visibleAccordionIndex:e})}};var a=n.props.searchParams,r=a&&Number(a.menuIndex)||0;return n.state={activeMenuIndex:r,visibleAccordionIndex:void 0,lastAccordionIndexWithSelection:0,hasClickedMenuItemOnce:!1},n.handleHoverLogic=n.handleHoverLogic.bind(Object(g.a)(n)),n.switchFacet=n.switchFacet.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.rgbIndex!==e.rgbIndex&&this.setState({visibleAccordionIndex:void 0,lastAccordionIndexWithSelection:0,activeMenuIndex:0})}},{key:"render",value:function(){var e=this.props,t=e.stackedBarChartConfiguration,n=e.name,a=e.menuConfig,r=e.accordionConfig,i=this.state,s=i.lastAccordionIndexWithSelection,c=i.activeMenuIndex,l="";r?l=r[s].menuConfig[c].sql:r&&(l=a[c].sql);var u=this.renderMenuDropdown(),d=this.renderQueryChildren(),m=void 0!==t;return o.createElement(o.Fragment,null,o.createElement("h3",{id:"exploreCount",className:"SRC-boldText"},o.createElement(Gt,{token:this.props.token,name:n,sql:l})),o.createElement("div",{className:"break"},o.createElement("hr",null)),o.createElement("div",{className:"col-xs-2 SRC-menuLayout ".concat(m?"SRC-menuPadding":"SRC-menuPaddingLess")},u),o.createElement("div",{className:"col-xs-10"},d))}},{key:"renderMenuConfig",value:function(e,t){var n=this.props,r=n.token,i=n.rgbIndex,s=void 0===i?0:i,c=n.isConsistent,l=void 0!==c&&c,u=n.unitDescription,d=void 0===u?"":u,m=n.searchParams,h=t.cardConfiguration,p=t.tableConfiguration,f=t.stackedBarChartConfiguration,g=this.state.activeMenuIndex,b="",v="";if(m){var S=m.facetValue;b=void 0===S?"":S,v=m.menuIndex}var y=void 0!==f;return e.map(function(e,t){var n=g===t,i=e.facetName,c=e.facetAliases,u=e.sql,m="";n||(m="SRC-hidden");var S=[];Number(v)===t&&i&&b&&(S=[{concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",facetValues:[b],columnName:i}]);var E=n;return o.createElement("span",{key:i,className:m},o.createElement(Jt,{showBarChart:y,loadNow:E,showMenu:!0,initQueryRequest:{concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_FACETS|a.BUNDLE_MASK_QUERY_RESULTS,query:{sql:u,selectedFacets:S,isConsistent:l,limit:25,offset:0}},unitDescription:d,facetName:i,token:r,rgbIndex:s,facetAliases:c},f?o.createElement(Xt,f):o.createElement(o.Fragment,null),o.createElement(Yt,null),p?o.createElement(Wt,p):o.createElement(o.Fragment,null),h?o.createElement(Ra,h):o.createElement(o.Fragment,null)))})}},{key:"renderQueryChildren",value:function(){var e=this,t=this.props,n=t.accordionConfig,a=t.menuConfig,r=this.state.lastAccordionIndexWithSelection;return n?n.map(function(t,n){return o.createElement("div",{className:r===n?"":"SRC-hidden"},e.renderMenuConfig(t.menuConfig,t))}):this.renderMenuConfig(a,this.props)}},{key:"renderMenuDropdown",value:function(){var e=this,t=this.props,n=t.accordionConfig,a=t.menuConfig,r=this.state,i=r.visibleAccordionIndex,s=r.lastAccordionIndexWithSelection,c=r.hasClickedMenuItemOnce,l=wt(this.props.rgbIndex,5).colorPalette;return n?n.map(function(t,n){var a=i===n,r=s===n&&c,u=a||r,d=l[0],m={background:u?d:"#F5F5F5",color:a?"white":""},h=u?"SRC-whiteText ":"";a?(h+="SRC-pointed-triangle-down",m.borderTopColor=d):r&&(h+="SRC-pointed-triangle-right",m.borderLeftColor=d);var p={isSelected:u,originalColor:d,hoverWhiteTextClass:"SRC-hoverWhiteText"},f={isSelected:u,originalColor:"#F5F5F5"};return o.createElement(o.Fragment,null,o.createElement("div",{style:m,role:"button",onMouseEnter:e.handleHoverLogic(p),onMouseLeave:e.handleHoverLogic(f),className:"SRC-accordion-key SRC-gap SRC-hand-cursor SRC-menu-button-base ".concat(h),onClick:e.toggleSelectionLevel(n)},t.name,o.createElement("span",{className:"menu-icon"},o.createElement(Ot.a,{className:u?"":"SRC-accordion-not-selected",size:"xs",color:u?"white":"black",icon:a?"minus":"plus"}))),o.createElement(Ct.TransitionGroup,null,i===n&&o.createElement(Ct.CSSTransition,{key:JSON.stringify(t),classNames:"SRC-accordion-menu",timeout:{enter:300,exit:500}},o.createElement("div",{className:"SRC-accordion-menu"},e.renderFacetMenu(t.menuConfig,n)))))}):this.renderFacetMenu(a,0)}},{key:"renderFacetMenu",value:function(e,t){var n=this,a=this.props,r=a.rgbIndex,i=a.accordionConfig,s=wt(r,5).colorPalette,c=s[0],l="#F5F5F5";return i&&(c=s[2],l=s[4]),e.map(function(e,a){var r=e.facetName,i=e.facetAliases,s=void 0===i?{}:i,u=n.state.activeMenuIndex===a&&t==n.state.lastAccordionIndexWithSelection,d={},m="";u?(d.background=c,d.borderLeftColor=c,m="SRC-pointed-triangle-right SRC-whiteText"):(m="SRC-blackText",d.background=l);var h={isSelected:u,originalColor:c,hoverWhiteTextClass:"SRC-hoverWhiteText"},p={isSelected:u,originalColor:l},f=s[r]||r;return o.createElement("div",{onMouseEnter:n.handleHoverLogic(h),onMouseLeave:n.handleHoverLogic(p),key:e.facetName,className:"SRC-gap SRC-hand-cursor SRC-menu-button-base ".concat(m),onClick:n.switchFacet(a,t),onKeyPress:n.switchFacet(a,t),role:"button",tabIndex:0,style:d},f)})}}]),t}(o.Component),wa=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).inputOpenFileRef=void 0,n.showOpenFileDlg=function(){n.inputOpenFileRef&&n.inputOpenFileRef.current&&n.inputOpenFileRef.current.click()},n.handleChange=function(e){e.target.files&&n.handleFilesChanged(e.target.files)},n.finishedProcessingOneFile=function(){var e=n.state.filesUploadedCount+1,t=e<n.state.totalFilesToUploadCount;n.setState({isUploading:t,filesUploadedCount:e,successfullyUploaded:!t})},n.handleUploadError=function(e){n.finishedProcessingOneFile(),n.setState({error:e})},n.handleFilesChanged=function(e){n.setState({error:void 0,isUploading:!0,filesUploadedCount:0,totalFilesToUploadCount:e.length,successfullyUploaded:!1}),Array.from(e).forEach(function(e){var t={parentId:n.props.parentContainerId,name:e.name,concreteType:"org.sagebionetworks.repo.model.FileEntity",dataFileHandleId:""},a={entityName:e.name,parentId:n.props.parentContainerId};Qe(a,n.props.token).then(function(a){Ve(n.props.token,a.id).then(function(a){"org.sagebionetworks.repo.model.FileEntity"===a.concreteType?n.updateEntityFile(a,e):n.updateEntityFile(t,e)})}).catch(function(a){404===a.statusCode?n.updateEntityFile(t,e):n.handleUploadError(a)})})},n.updateEntityFile=function(e,t){it(n.props.token,t.name,t).then(function(t){var a=""===e.dataFileHandleId;e.dataFileHandleId=t.fileHandleId,(a?Ae:ze)(e,n.props.token).then(function(){n.finishedProcessingOneFile()})}).catch(function(e){n.handleUploadError(e)})},n.state={token:"",isUploading:!1,filesUploadedCount:0,totalFilesToUploadCount:0,successfullyUploaded:!1},n.inputOpenFileRef=o.createRef(),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement("input",{ref:this.inputOpenFileRef,type:"file",style:{display:"none"},onChange:this.handleChange,multiple:!0}),o.createElement("button",{type:"button",onClick:this.showOpenFileDlg,className:"SRC-uploadButton"},"Browse..."),this.state.isUploading&&o.createElement(o.Fragment,null,o.createElement("span",{style:{marginLeft:"10px"}},this.state.filesUploadedCount," / ",this.state.totalFilesToUploadCount," file(s)"),o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"})),this.state.successfullyUploaded&&o.createElement("span",{style:{marginLeft:"10px"}},"Successfully uploaded ",this.state.totalFilesToUploadCount," file(s) to",o.createElement("a",{style:{marginLeft:"2px"},href:"https://www.synapse.org/#!Synapse:".concat(this.props.parentContainerId),rel:"noopener noreferrer",target:"_blank"},this.props.parentContainerId)),this.state.error&&o.createElement("p",null,"Upload error!"))}}]),t}(o.Component),Oa=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).updateFileContent=function(e){if(n.props.token&&n.state.targetEntity&&n.state.fileContent){n.setState({isLoading:!0});var t=new Blob([n.state.fileContent],{type:"text/plain"});it(n.props.token,n.state.targetEntity.name,t).then(function(e){n.state.targetEntity&&(n.state.targetEntity.dataFileHandleId=e.fileHandleId,ze(n.state.targetEntity,n.props.token).then(function(e){var t=e;n.setState({targetEntity:t,isLoading:!1})}).catch(function(e){n.setState({error:e,isLoading:!1})}))}).catch(function(e){n.setState({error:e,isLoading:!1})})}},n.handleContentChange=function(e){n.setState({fileContent:e.target.value})},n.state={token:"",isLoading:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.token,a=t.targetEntityId;n&&(this.setState({isLoading:!0}),Ve(n,a).then(function(t){if("org.sagebionetworks.repo.model.FileEntity"===t.concreteType){var a=t;mt(n,a).then(function(t){e.setState({fileContent:t,targetEntity:a,isLoading:!1})})}else e.setState({error:"invalid type",isLoading:!1})}).catch(function(t){e.setState({error:t,isLoading:!1})}))}},{key:"render",value:function(){return o.createElement("div",null,this.state.fileContent&&o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement("textarea",{style:{width:"100%",height:"300px"},value:this.state.fileContent,onChange:this.handleContentChange})),o.createElement("button",{onClick:this.updateFileContent},"Update File Content...")),this.state.isLoading&&o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"}),this.state.error&&o.createElement("p",null,"Download error!"))}}]),t}(o.Component),Na=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).entityFormRef=void 0,n.handleCardSelection=function(e){var t=e.target.value,r="";switch(t){case a.AMP_CONSORTIUM:r="SELECT * FROM syn17024173";break;case a.DATASET:r="SELECT * FROM syn16859580";break;case a.TOOL:r="SELECT * FROM syn16859448";break;case a.PUBLICATION:r="SELECT * FROM syn16857542"}n.setState({cardSql:r,cardSelection:t})},n.entityFormRef=o.createRef(),n.state={isLoading:!0,ownerId:"",showMarkdown:!0,token:"",version:0,cardSql:"SELECT * FROM syn16859448",cardSelection:a.TOOL,showTabOne:!1,tabOne:{menuConfig:[{title:"Data",facetDisplayValue:"Organism",facetName:"dataStatus",sql:"SELECT projectStatus, dataStatus, tumorType, diseaseFocus FROM syn16787123",synapseId:"syn16787123",unitDescription:"dataStatus"},{title:"Data",facetDisplayValue:"Study",facetName:"projectStatus",sql:"SELECT * FROM syn16787123",synapseId:"syn16787123",unitDescription:"projectStatus",visibleColumnCount:5}],rgbIndex:2},tabTwo:{menuConfig:[{facetName:"assay",sql:"SELECT * FROM syn16858331",synapseId:"syn16858331",title:"title",unitDescription:"datum"},{facetName:"dataType",sql:"SELECT id, fundingAgency, assay, diagnosis, dataType FROM syn16858331"},{facetName:"diagnosis",sql:"SELECT id, fundingAgency, assay, diagnosis, dataType FROM syn16858331",title:"title"}],rgbIndex:5}},n.makeSampleQueryCall=n.makeSampleQueryCall.bind(Object(g.a)(n)),n.getVersion=n.getVersion.bind(Object(g.a)(n)),n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.removeHandler=n.removeHandler.bind(Object(g.a)(n)),n.handleCardSelection=n.handleCardSelection.bind(Object(g.a)(n)),n.onSubmitEntityForm=n.onSubmitEntityForm.bind(Object(g.a)(n)),n.onEntityFormSubmitted=n.onEntityFormSubmitted.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"onSubmitEntityForm",value:function(){this.entityFormRef.current.submitForm()}},{key:"onEntityFormSubmitted",value:function(e){this.setState({userFormDataSynId:e})}},{key:"getVersion",value:function(){var e=this;r.getVersion().then(function(t){return e.setState({version:t.version})}).catch(function(e){console.error("Get version failed",e)})}},{key:"makeSampleQueryCall",value:function(){var e={entityId:"syn12335586",partMask:a.BUNDLE_MASK_QUERY_RESULTS|a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_SELECT_COLUMNS|a.BUNDLE_MASK_QUERY_FACETS,query:{includeEntityEtag:!0,isConsistent:!1,limit:100,offset:0,sql:"SELECT * FROM syn12335586"}};r.getQueryTableResults(e).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"removeHandler",value:function(){this.setState({showMarkdown:!this.state.showMarkdown})}},{key:"componentDidMount",value:function(){var e=this;r.detectSSOCode(),r.getSessionTokenFromCookie().then(function(t){return e.handleChange({token:t})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this;var t="https://www.synapse.org/#!Synapse:".concat(this.state.userFormDataSynId);return o.createElement("div",null,o.createElement("p",{className:"App-intro text-center"},"Synapse production version: ",this.state.version),this.state.token&&""!==this.state.token&&o.createElement("div",{className:"bg-success text-center",role:"alert"},"You are logged in.\xa0",o.createElement("button",{onClick:r.signOut},o.createElement("span",{"aria-hidden":"true"},"Sign out"))),(!this.state.token||""===this.state.token)&&o.createElement("div",null,o.createElement(gt,{token:r.IS_DEV_ENV?"":this.state.token,theme:"light",icon:!0}),o.createElement("hr",null)),this.state.token&&""!==this.state.token&&o.createElement("div",{className:"container"},o.createElement(St,{parentContainerId:"syn20355732",token:this.state.token,formSchemaEntityId:"syn20184776",formUiSchemaEntityId:"syn20184771",initFormData:!1,ref:this.entityFormRef,synIdCallback:this.onEntityFormSubmitted})),this.state.token&&""!==this.state.token&&!this.state.userFormDataSynId&&o.createElement("div",{className:"container"},o.createElement("button",{onClick:this.onSubmitEntityForm,className:"btn btn-info"},"Programmatically Call Submit")),this.state.token&&""!==this.state.token&&this.state.userFormDataSynId&&o.createElement("div",{className:"container"},o.createElement("a",{href:t,target:"_blank"},"User Form Data Synapse FileEntity created/updated")),this.state.token&&""!==this.state.token&&o.createElement("div",{className:"container"},o.createElement("h5",null,"Upload File(s) Demo"),o.createElement(wa,{token:this.state.token,parentContainerId:"syn18987891"}),o.createElement("hr",null)),this.state.token&&""!==this.state.token&&o.createElement("div",{className:"container"},o.createElement("h5",null,"Download File Content Demo (syn12196718)"),o.createElement(Oa,{token:this.state.token,targetEntityId:"syn12196718"}),o.createElement("hr",null)),this.state.isLoading?o.createElement("div",{className:"container"}," Loading markdown.. "):"",o.createElement("div",{className:"container"},o.createElement("form",null,o.createElement("label",null,"Pick a card type",o.createElement("select",{value:this.state.cardSelection,onChange:this.handleCardSelection},o.createElement("option",{value:a.AMP_CONSORTIUM},a.AMP_CONSORTIUM),o.createElement("option",{value:a.DATASET},a.DATASET),o.createElement("option",{value:a.TOOL},a.TOOL),o.createElement("option",{value:a.PUBLICATION},a.PUBLICATION))))),o.createElement("div",{className:"container"},o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({showTabOne:!e.state.showTabOne})}},"toggle tabs for query wrapper menu"),o.createElement("a",{href:"#table"}," Table Demo "),o.createElement(ka,{isConsistent:!0,name:"Demo",token:r.IS_DEV_ENV?"":this.state.token,menuConfig:this.state.showTabOne?this.state.tabOne.menuConfig:this.state.tabTwo.menuConfig,rgbIndex:this.state.showTabOne?this.state.tabOne.rgbIndex:this.state.tabTwo.rgbIndex,stackedBarChartConfiguration:{loadingScreen:o.createElement("div",null)}})))}}]),t}(o.Component),xa=(n(107),n(193)),La=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).renderBookmarks=n.renderBookmarks.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"renderBookmarks",value:function(){for(var e,t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g,a=[];e=n.exec(t);)a.push(e[1]);return a.map(function(e,t){var n=t<a.length-1;return o.createElement(o.Fragment,{key:t},o.createElement("span",null,o.createElement("a",{href:"",id:"bookmark".concat(t)},"[",t+1,"]")),e,n&&o.createElement("br",null))})}},{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement("hr",null),this.renderBookmarks())}}]),t}(o.Component),Ia=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).getEntity=n.getEntity.bind(Object(g.a)(n)),n.getSynapseFiles=n.getSynapseFiles.bind(Object(g.a)(n)),n.compareById=n.compareById.bind(Object(g.a)(n)),n.state={isLoaded:!1,preSignedURL:""},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"compareById",value:function(e,t){return function(n){return n[t]===e}}},{key:"matchToHandle",value:function(e,t){return t?t.filter(e):[]}},{key:"getEntity",value:function(){var e=this,t=this.props,n=t.token,a=t.synapseId;Ve(n,a).then(function(t){var n=[{associateObjectId:a,associateObjectType:"FileEntity",fileHandleId:t.dataFileHandleId}];e.getSynapseFiles(n,t.dataFileHandleId)})}},{key:"getSynapseFiles",value:function(e,t){var n=this;We({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:e},this.props.token).then(function(e){var a=n.matchToHandle(n.compareById(t,"fileHandleId"),e.requestedFiles);n.setState({preSignedURL:a[0].preSignedURL})})}},{key:"componentDidMount",value:function(){if(this.props.hasOwnProperty("wikiId")){var e=this.props,t=e.fileName,n=e.fileResults,a=this.matchToHandle(this.compareById(t,"fileName"),n),r=[{associateObjectId:this.props.wikiId,associateObjectType:"WikiAttachment",fileHandleId:a[0].id}];this.getSynapseFiles(r,a[0].id)}else this.getEntity()}},{key:"render",value:function(){var e={},t=this.props.params;return t&&t.align&&(e.float=t.align.toLowerCase()),this.state.isLoaded||!this.state.preSignedURL?null:o.createElement(o.Fragment,null,o.createElement("img",{alt:"synapse",className:"img-fluid",src:this.state.preSignedURL,style:e}))}}]),t}(o.Component),Ta=n(185),Fa=n.n(Ta),Da=n(186),Ma=n.n(Da)()(Fa.a),ja=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={isLoaded:!1,queryData:{}},n.fetchPlotlyData=n.fetchPlotlyData.bind(Object(g.a)(n)),n.showPlot=n.showPlot.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.fetchPlotlyData()}},{key:"fetchPlotlyData",value:function(){var e=this,t=this.props.token,n=this.props.widgetparamsMapped.query,r={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:a.BUNDLE_MASK_QUERY_RESULTS,query:{sql:n}};Fe(r,t).then(function(t){e.setState({isLoaded:!0,queryData:t})}).catch(function(e){console.log("Error on full table query ",e)})}},{key:"showPlot",value:function(){if(this.state.isLoaded){var e=this.props.widgetparamsMapped,t=e.title,n=e.xtitle,a=e.ytitle,r=e.type,i=e.xaxistype,s=e.showlegend,c=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),u={showlegend:s,title:t};n&&(u.xaxis={title:n}),i&&(u.xaxis=Object(me.a)({},u.xaxis,{xaxistype:i.toLowerCase()})),a&&(u.yaxis={title:a});for(var d=[],m=l?"v":"h",h=c.queryData.queryResult.queryResults.headers,p=0;p<h.length-1;p+=1)d[p]={orientation:m,name:h[p+1].name,type:r.toLowerCase(),x:[],y:[]};var f=!0,g=!1,b=void 0;try{for(var v,S=c.queryData.queryResult.queryResults.rows[Symbol.iterator]();!(f=(v=S.next()).done);f=!0)for(var y=v.value,E=1;E<y.values.length;E+=1){var C=y.values;d[E-1].x.push(C[0]),d[E-1].y.push(C[E])}}catch(R){g=!0,b=R}finally{try{f||null==S.return||S.return()}finally{if(g)throw b}}return o.createElement(Ma,{layout:u,data:d})}}},{key:"render",value:function(){return this.state.isLoaded?this.showPlot():null}}]),t}(o.Component),Aa={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"},Pa=markdownit({html:!0}),_a=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).markupRef=void 0,markdownitSynapse.init_markdown_it(Pa,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);return Pa.use(markdownitSynapse,"").use(markdownitMath,""),n.state={md:Pa,errorMessage:"",fileHandles:void 0,text:""},n.markupRef=o.createRef(),n.handleLinkClicks=n.handleLinkClicks.bind(Object(g.a)(n)),n.processWidgets=n.processWidgets.bind(Object(g.a)(n)),n.processWidgetOrDomElement=n.processWidgetOrDomElement.bind(Object(g.a)(n)),n.processMath=n.processMath.bind(Object(g.a)(n)),n.getWikiAttachments=n.getWikiAttachments.bind(Object(g.a)(n)),n.getWikiPageMarkdown=n.getWikiPageMarkdown.bind(Object(g.a)(n)),n.renderWidget=n.renderWidget.bind(Object(g.a)(n)),n.renderSynapseButton=n.renderSynapseButton.bind(Object(g.a)(n)),n.renderSynapseImage=n.renderSynapseImage.bind(Object(g.a)(n)),n.renderSynapsePlot=n.renderSynapsePlot.bind(Object(g.a)(n)),n.renderSynapseTOC=n.renderSynapseTOC.bind(Object(g.a)(n)),n.getErrorView=n.getErrorView.bind(Object(g.a)(n)),n.createMarkup=n.createMarkup.bind(Object(g.a)(n)),n.addBookmarks=n.addBookmarks.bind(Object(g.a)(n)),n.addIdsToReferenceWidgets=n.addIdsToReferenceWidgets.bind(Object(g.a)(n)),n.addIdsToTocWidgets=n.addIdsToTocWidgets.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillUnmount",value:function(){this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}},{key:"handleLinkClicks",value:function(e){if("A"===e.target.tagName){var t=e.target;if("ref"===t.id.substring(0,3)){e.preventDefault();var n=Number(e.currentTarget.id.substring(3)),a=this.markupRef.current.querySelector("#bookmark".concat(n));try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}else if(null!==e.currentTarget.id&&t.getAttribute("data-anchor")){e.preventDefault();var r=t.getAttribute("data-anchor"),o=this.markupRef.current.querySelector("#".concat(r));try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}}}},{key:"createMarkup",value:function(e){var t=this.state.md.render(e);return{__html:sanitizeHtml(t,{allowedAttributes:{a:["href","target"],button:["class"],div:["class","style"],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],li:["class"],ol:["class"],span:["*"],table:["class"],th:["class"],thead:["class"],ul:["class"]},allowedTags:["span","code","h1","h2","h3","h4","h5","p","b","i","em","strong","a","id","table","tr","td","tbody","th","thead","button","div","image","ol","ul","li","svg","g","br","hr","summary","details"]})}}},{key:"processMath",value:function(){this.markupRef.current&&this.markupRef.current.querySelectorAll('[id^="mathjax-"]').forEach(function(e){katex.render(e.textContent,e,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}],throwOnError:!1})})}},{key:"addBookmarks",value:function(){markdownitSynapse.resetFootnotes(),this.createMarkup(this.state.text);var e=this.createMarkup(markdownitSynapse.footnotes()).__html;if(e.length>0)return o.createElement(La,{footnotes:e})}},{key:"getWikiPageMarkdown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0===this.state.text.length||t)&&r.getEntityWiki(this.props.token,this.props.ownerId,this.props.wikiId).then(function(t){e.setState({text:t.markdown}),e.props.updateLoadState&&e.props.updateLoadState({isLoading:!1})}).catch(function(e){console.log("Error on wiki markdown load\n",e)})}},{key:"getWikiAttachments",value:function(){var e=this;r.getWikiAttachmentsFromEntity(this.props.token,this.props.ownerId,this.props.wikiId).then(function(t){e.setState({fileHandles:t,errorMessage:""})}).catch(function(t){e.setState({errorMessage:t.reason}),console.log("Error on wiki attachment load ",t)})}},{key:"getErrorView",value:function(){if(this.state.errorMessage&&this.props.errorMessageView){var e=o.cloneElement(this.props.errorMessageView,{message:this.state.errorMessage});return o.createElement(o.Fragment,null,e)}}},{key:"addIdsToReferenceWidgets",value:function(e){var t=1;return e.replace(/<span id="wikiReference.*?<span data-widgetparams.*?span>/g,function(){var e=t;return t+=1,'<a href="" id="ref'.concat(e,'">[').concat(e,"]</a>")})}},{key:"addIdsToTocWidgets",value:function(e){var t=1;return e.replace(/<h[1-6] toc="true">.*<\/h[1-6]>/gm,function(e){var n=t;return t+=1,"".concat(e.substring(0,3),' id="').concat("SRC-header-").concat(n,'"').concat(e.substring(3))})}},{key:"processWidgets",value:function(){var e=this.createMarkup(this.state.text).__html;e=this.addIdsToReferenceWidgets(e);var t=(e=this.addIdsToTocWidgets(e)).split(/(<span data-widgetparams.*?span>)/);if(t.length>0)return this.processWidgetOrDomElement(t,e)}},{key:"decodeXml",value:function(e){var t={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return e.replace(/(&quot;|&lt;|&gt;|&amp;)/g,function(e,n){return t[n]})}},{key:"processWidgetMappings",value:function(e,t){var n=e.match(/data-widgetparams=("(.*?)")/),a=this.decodeXml(n[2]),r=a.indexOf("?");if(-1===r)return this.renderWidget(a,{},t);var o=a.substring(0,r),i={};return a.substring(r+1).split("&").forEach(function(e){var t=e.split("="),n=Object(xa.a)(t,2),a=n[0],r=n[1];r=decodeURIComponent(r),i[a]=r}),this.renderWidget(o,i,t)}},{key:"processWidgetOrDomElement",value:function(e,t){var n=[],a=0,r=!0,i=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value;if(-1!==u.indexOf("<span data-widgetparams"))n.push(this.processWidgetMappings(u,t));else{var d=a.toString()+u;n.push(o.createElement("span",{key:d,dangerouslySetInnerHTML:{__html:u}})),a+=1}}}catch(m){i=!0,s=m}finally{try{r||null==l.return||l.return()}finally{if(i)throw s}}return n}},{key:"renderWidget",value:function(e,t,n){var a=JSON.stringify(t);switch(t.reactKey=a,e){case"buttonlink":return this.renderSynapseButton(t);case"image":return this.renderSynapseImage(t);case"plot":return this.renderSynapsePlot(t);case"toc":return this.renderSynapseTOC(n);case"badge":return this.renderUserBadge(t);default:return}}},{key:"renderSynapseButton",value:function(e){return o.createElement("a",{key:e.reactKey,href:e.url,className:"btn btn-lg btn-info",role:"button"},e.text)}},{key:"renderSynapsePlot",value:function(e){return o.createElement(ja,{key:e.reactKey,token:this.props.token,ownerId:this.props.ownerId,wikiId:this.props.wikiId,widgetparamsMapped:e})}},{key:"renderSynapseImage",value:function(e){if(this.state.fileHandles){var t=e.reactKey;return e.fileName?o.createElement(Ia,{params:e,key:t,token:this.props.token,fileName:e.fileName,wikiId:this.props.wikiId,fileResults:this.state.fileHandles.list}):e.synapseId?o.createElement(Ia,{params:e,key:t,token:this.props.token,synapseId:e.synapseId}):void 0}}},{key:"renderSynapseTOC",value:function(e){var t=[],n="";return e.replace(/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm,function(e,a,r,i){return n+=i,t.push(o.createElement("div",{key:i},o.createElement("a",{className:"link ".concat(Aa[Number(a)]),"data-anchor":r}," ",i," "))),""}),o.createElement("div",{key:n},t)}},{key:"renderUserBadge",value:function(e){return o.createElement(Ea,{key:JSON.stringify(e),size:a.SMALL_USER_CARD,alias:e.alias})}},{key:"componentDidMount",value:function(){this.props.markdown&&this.setState({text:this.props.markdown}),this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks);var e=this.props.hasSynapseResources;(void 0===e||e)&&(this.getWikiAttachments(),this.getWikiPageMarkdown()),this.processMath()}},{key:"componentDidUpdate",value:function(e){var t=this.props.hasSynapseResources,n=void 0===t||t,a=this.props.token!==e.token;(a=(a=a||this.props.ownerId!==e.ownerId)||this.props.wikiId!==e.wikiId)&&n&&(this.getWikiAttachments(),this.getWikiPageMarkdown(!0)),this.processMath()}},{key:"render",value:function(){return o.createElement("div",{className:"markdown",ref:this.markupRef},this.getErrorView(),o.createElement("span",null,this.processWidgets()),o.createElement("div",null,this.addBookmarks()))}}]),t}(o.Component),Ua=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).executeInitialQueryRequest=n.executeInitialQueryRequest.bind(Object(g.a)(n)),n.getLastQueryRequest=n.getLastQueryRequest.bind(Object(g.a)(n)),n.getNextPageOfData=n.getNextPageOfData.bind(Object(g.a)(n)),n.state=t.defaultState,n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.executeInitialQueryRequest()}},{key:"componentDidUpdate",value:function(e){""!==this.props.token&&""===e.token&&this.executeInitialQueryRequest(),e.sql!==this.props.sql&&this.executeInitialQueryRequest()}},{key:"getLastQueryRequest",value:function(){return Tt(this.state.queryRequest)}},{key:"getNextPageOfData",value:function(){var e=Object(pe.a)(ue.a.mark(function e(t){var n=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,Ft(t,this.state.data,this.props.token).then(function(e){n.setState(Object(me.a)({},e,{isLoading:!1,queryRequest:Tt(t)}))});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"executeInitialQueryRequest",value:function(){var e=this;this.setState({isLoading:!0});var t=this.props.sql;this.props.searchParams&&(t=function(e,t){var n=jt.lexer.tokenize(t),a=n.findIndex(function(e){return"WHERE"===e[0]}),r=-1===a?n.findIndex(function(e){return"FROM"===e[0]})+2:a,o=r+1;-1===a?n.splice(r,0,["WHERE","WHERE","1"]):n.splice(o,0,["CONDITIONAL","AND","1"]);var i=Object.keys(e).length;return Object.keys(e).forEach(function(t,a){var r=[["LITERAL",t,"1"],["OPERATOR","LIKE","1"],["STRING","%".concat(e[t],"%"),"1"]];a<i-1&&r.unshift(["CONDITIONAL","AND","1"]),n.splice.apply(n,[o,0].concat(r))}),At(n)}(this.props.searchParams,this.props.sql));var n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_FACETS|a.BUNDLE_MASK_QUERY_RESULTS|a.BUNDLE_MASK_QUERY_COUNT,query:{sql:t,isConsistent:!1,limit:25,offset:0}};r.getQueryTableResults(n,this.props.token).then(function(t){var r=Tt(n);r.partMask=a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_FACETS|a.BUNDLE_MASK_QUERY_RESULTS;var o={hasMoreData:t.queryResult.queryResults.rows.length===a.PAGE_SIZE,data:t,queryRequest:r,isLoading:!1,totalResultsNoFacet:t.queryCount};e.setState(o)}).catch(function(e){console.log("Failed to get data ",e)})}},{key:"render",value:function(){var e=this.props,t=(e.sql,e.searchParams,e.token,Object(he.a)(e,["sql","searchParams","token"]));return o.createElement(Ra,Object.assign({},t,{data:this.state.data,totalResultsNoFacet:this.state.totalResultsNoFacet,getLastQueryRequest:this.getLastQueryRequest,getNextPageOfData:this.getNextPageOfData,hasMoreData:this.state.hasMoreData,isLoading:this.state.isLoading}))}}]),t}(o.Component);Ua.defaultProps={token:""},Ua.defaultState={data:void 0,isLoading:!0,queryRequest:{},totalResultsNoFacet:0,hasMoreData:!0};n(157),n(158);var qa=function(e){function t(e){var n;Object(m.a)(this,t);var r="SELECT * FROM syn20337467 WHERE toolType = 'experimental'",i="SELECT * FROM syn20337467 WHERE toolType = 'computational'",s={title:"Title",type:"Generic Tool",subTitle:"softwareType",description:"summary",icon:"icon",secondaryLabels:{0:{key:"contributor",alias:"Contributor"},1:{key:"diagnosis",alias:"Diagnosis"},2:{key:"program",alias:"Program"}}};return(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={isLoading:!0,ownerId:"",showMarkdown:!0,showTabOne:!1,tabTwo:{showBarChart:!1,name:"Demo",unitDescription:"persons",cardConfiguration:{genericCardSchema:s,type:a.MEDIUM_USER_CARD,loadingScreen:o.createElement("div",{style:{height:450}}," I'm loading as fast I can! ")},rgbIndex:1,accordionConfig:[{name:"Clinical",cardConfiguration:{genericCardSchema:s,type:a.GENERIC_CARD,loadingScreen:o.createElement("div",{style:{height:450}}," I'm loading as fast I can! ")},menuConfig:[{facetName:"grant",sql:i},{facetName:"diagnosis",sql:"".concat(i," LIMIT 1 ")},{facetName:"modelType",sql:"".concat(i," LIMIT 2")}]},{name:"Experimental",cardConfiguration:{genericCardSchema:s,type:a.GENERIC_CARD,loadingScreen:o.createElement("div",{style:{height:450}}," I'm loading as fast I can! ")},menuConfig:[{facetName:"program",sql:r},{facetName:"reagentType",sql:"".concat(r," LIMIT 1")},{facetName:"softwareType",sql:"".concat(r," LIMIT 2")}]}],menuConfig:[{facetName:"institution",sql:"SELECT ownerID as ownerId, firstName, lastName, institution from syn13897207"}]},tabOne:{tableConfiguration:{title:"title",unitDescription:"datum"},menuConfig:[{facetName:"diagnosis",sql:"SELECT study, assay, count(distinct id) AS files, concat(organ) AS organs FROM syn17024112 WHERE species='Human' AND assay='rnaSeq' group by 1,2 order by 3 desc"},{facetName:"study",sql:"SELECT * FROM syn11346063"}],rgbIndex:5},token:"",version:0},n.makeSampleQueryCall=n.makeSampleQueryCall.bind(Object(g.a)(n)),n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.removeHandler=n.removeHandler.bind(Object(g.a)(n)),n.rgba2rgb=n.rgba2rgb.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"rgba2rgb",value:function(e,t){var n=t[3];return[Math.floor((1-n)*e[0]+n*t[0]+.5),Math.floor((1-n)*e[1]+n*t[1]+.5),Math.floor((1-n)*e[2]+n*t[2]+.5)]}},{key:"makeSampleQueryCall",value:function(){var e={entityId:"syn12335586",partMask:a.BUNDLE_MASK_QUERY_RESULTS|a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_SELECT_COLUMNS|a.BUNDLE_MASK_QUERY_FACETS,query:{includeEntityEtag:!0,isConsistent:!1,limit:100,offset:0,sql:"SELECT * FROM syn12335586"}};r.getQueryTableResults(e).then(function(e){return console.log(e)}).catch(function(e){console.error(e)})}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"removeHandler",value:function(){this.setState({showMarkdown:!this.state.showMarkdown})}},{key:"render",value:function(){var e=this,t=this.state.showTabOne?this.state.tabOne:this.state.tabTwo;return o.createElement("div",{className:"container"},o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({showTabOne:!e.state.showTabOne})}},"toggle tabs"),o.createElement("h2",null,"Demo of table"),o.createElement(ka,Object.assign({token:"",name:"Studies",isConsistent:!0},t,{rgbIndex:this.state.showTabOne?1:this.state.tabTwo.rgbIndex,loadingScreen:o.createElement("div",null,"loading... ")})))}}]),t}(o.Component),Ba=n(187),Ha=n.n(Ba),Qa=n(188),Wa=n.n(Qa),Va=n(189),za=n.n(Va),Ka=n(190),Ya=n.n(Ka),Ga=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e={"AMP-AD":Wa.a,"M2OVE-AD":Ha.a,"MODEL-AD":za.a,"Resilience-AD":Ya.a};return o.createElement("div",null,o.createElement("hr",null),o.createElement("p",null," Generic Card Rendering "),o.createElement(Ua,{type:a.GENERIC_CARD,sql:"SELECT * FROM syn17024173",searchParams:{Program:"AMP-AD"},genericCardSchema:{type:"PROGRAM",title:"Full Name",subTitle:"Short Description",description:"Long Description",icon:"Program",secondaryLabels:{0:{key:"Full Name"}}},backgroundColor:"#5960a5",isHeader:!0,iconOptions:e}),o.createElement(Ua,{type:a.MEDIUM_USER_CARD,sql:"SELECT ownerID as ownerId FROM syn13897207",loadingScreen:o.createElement("div",null," Im loading as fast I can !!! ")}))}}]),t}(o.Component);yt.b.add(Et.o),yt.b.add(Et.c);var Ja=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={searchText:"",isFocusedOnSearchBar:!1},n.updateSearchText=n.updateSearchText.bind(Object(g.a)(n)),n.setSearchFocus=n.setSearchFocus.bind(Object(g.a)(n)),n.setSearchUnfocus=n.setSearchUnfocus.bind(Object(g.a)(n)),n.handleSearch=n.handleSearch.bind(Object(g.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"updateSearchText",value:function(e){var t=e.currentTarget.value;this.setState({searchText:t})}},{key:"setSearchFocus",value:function(){this.setState({isFocusedOnSearchBar:!0})}},{key:"setSearchUnfocus",value:function(){this.setState({isFocusedOnSearchBar:!1})}},{key:"handleSearch",value:function(){}},{key:"render",value:function(){return o.createElement("div",null,o.createElement("label",{htmlFor:"searchBar"},o.createElement("input",{id:"searchBar",type:"text",onChange:this.updateSearchText,onFocus:this.setSearchFocus,onBlur:this.setSearchUnfocus,onKeyPress:this.handleSearch}),!this.state.searchText&&!this.state.isFocusedOnSearchBar&&o.createElement(Ot.a,{className:"SRC-searchBar",icon:"search"}),o.createElement("span",{className:"SRC-hand-cursor",onClick:this.handleSearch},o.createElement(Ot.a,{className:"SRC-arrowRight",icon:"arrow-right"}))))}}]),t}(o.Component),Za=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,e))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=["3376985","1131050","273960","3346401","3374422","273950","273950"];return o.createElement(o.Fragment,null,o.createElement("div",{className:"container"},o.createElement("div",{className:"row"},o.createElement("h3",null,"User Card Small "),o.createElement("p",null," sans photo- "),o.createElement(Ea,{ownerId:"273950",size:a.SMALL_USER_CARD}),o.createElement("p",null," without text "),o.createElement(Ea,{ownerId:"3374422",hideText:!0,size:a.SMALL_USER_CARD}),o.createElement("hr",null),o.createElement("p",null," with custom link- "),o.createElement(Ea,{ownerId:"273950",size:a.SMALL_USER_CARD,link:"https://google.com"}),o.createElement(Ea,{ownerId:"3374422",hideText:!0,size:a.SMALL_USER_CARD,link:"https://google.com"}),o.createElement("hr",null),o.createElement("p",null," without tooltip "),o.createElement("div",{className:"SRC-centerContent"},o.createElement(Ea,{ownerId:"3374422",hideTooltip:!0,size:a.SMALL_USER_CARD}),o.createElement(Ea,{ownerId:"3346401",hideTooltip:!0,size:a.SMALL_USER_CARD})),o.createElement("hr",null),o.createElement("p",null," with photo- "),o.createElement(Ea,{ownerId:"3346401",size:a.SMALL_USER_CARD}),o.createElement(Ea,{ownerId:"1131050",size:a.SMALL_USER_CARD}),o.createElement("p",null," without text- "),o.createElement(Ea,{ownerId:"273960",hideText:!0,size:a.SMALL_USER_CARD}),o.createElement("hr",null),o.createElement("p",null,"inside of markdown-"),o.createElement(_a,{wikiId:"588827",ownerId:"syn18380882"})),o.createElement("div",{className:"row"},o.createElement("h3",null," User Card Large "),o.createElement("p",null," with photo- "),o.createElement(Ea,{ownerId:"1131050",size:a.LARGE_USER_CARD,menuActions:[{field:"Projects",callback:function(e){console.log(e)}},{field:"Profile",callback:function(e){console.log(e)}},{field:"SEPERATOR"},{field:"Teams",callback:function(e){console.log(e)}}]}),o.createElement("br",null),o.createElement("p",null," sans photo- "),o.createElement("br",null),o.createElement(Ea,{ownerId:"3374422",size:a.LARGE_USER_CARD}),o.createElement("br",null),o.createElement("br",null),o.createElement(Ea,{ownerId:"345424",size:a.LARGE_USER_CARD,menuActions:[{field:"Projects",callback:function(e){console.log(e)}},{field:"Profile",callback:function(e){console.log(e)}},{field:"SEPERATOR"},{field:"Teams",callback:function(e){console.log(e)}}]}))),o.createElement("h3",null," User Card Medium Wrapping Example "),o.createElement("div",{className:"SRC-card-grid-row"},[1,2,3,4,5].map(function(t,n){return o.createElement("div",{className:"SRC-grid-item",key:n},o.createElement(Ea,{hideEmail:n%2===0,menuActions:[{field:"Projects",callback:function(e){console.log(e)}},{field:"Profile",callback:function(e){console.log(e)}},{field:"SEPERATOR"},{field:"Teams",callback:function(e){console.log(e)}}],ownerId:e[n],size:a.MEDIUM_USER_CARD,link:n%2?"https://google.com":""}))})))}}]),t}(o.Component),$a=function(){return o.createElement("div",{className:"container"},o.createElement(_a,{ownerId:"syn12666371",wikiId:"585317"}),o.createElement(_a,{ownerId:"syn17100797",wikiId:"587923"}),o.createElement(_a,{ownerId:"syn18380882",wikiId:"588827"}))},Xa=n(191),er=n.n(Xa),tr=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={rssFeed:{},isLoadingError:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.url;fetch(t).then(function(e){return e.text()}).then(function(e){return er.a.parse(e)}).then(function(t){return e.setState({rssFeed:t})}).catch(function(t){return e.setState({isLoadingError:!0})})}},{key:"render",value:function(){return o.createElement("ul",{className:"srcRssFeed"},this.state.rssFeed.items&&this.state.rssFeed.items.map(function(e){return o.createElement("li",{key:e.id,className:"srcRssFeedItem"},o.createElement("a",{className:"srcRssFeedItemTitle",href:e.links[0].url},e.title),o.createElement("div",{className:"srcRssFeedItemContent",dangerouslySetInnerHTML:{__html:e.content}}))}),this.state.isLoadingError&&o.createElement("div",null,"Unable to load feed: ",this.props.url))}}]),t}(o.Component),nr=function(){return o.createElement("div",{className:"container"},o.createElement(tr,{url:"https://www.houstonzoo.org/feed"}))},ar=function(e){var t=e.match;return o.createElement("div",null,o.createElement("h2",null,"Links to components under development "),o.createElement("ul",null,o.createElement("li",null,o.createElement(c.a,{to:"".concat(t.url,"/QueryWrapperMenuDemo")},"QueryWrapperMenuDemo")),o.createElement("li",null,o.createElement(c.a,{to:"".concat(t.url,"/SearchDemo")},"SearchDemo")),o.createElement("li",null,o.createElement(c.a,{to:"".concat(t.url,"/CardContainerLogicDemo")},"CardContainerLogicDemo")),o.createElement("li",null,o.createElement(c.a,{to:"".concat(t.url,"/UserBadgeDemo")},"UserBadgeDemo")),o.createElement("li",null,o.createElement(c.a,{to:"".concat(t.url,"/MarkdownSynapseDemo")},"MarkdownSynapseDemo")),o.createElement("li",null,o.createElement(c.a,{to:"".concat(t.url,"/NewsFeedDemo")},"NewsFeedDemo"))),o.createElement(l.a,{exact:!0,path:"".concat(t.url,"/QueryWrapperMenuDemo"),render:function(){return o.createElement(qa,{rgbIndex:0})}}),o.createElement(l.a,{exact:!0,path:"".concat(t.url,"/SearchDemo"),render:function(){return o.createElement(Ja,null)}}),o.createElement(l.a,{exact:!0,path:"".concat(t.url,"/CardContainerLogicDemo"),component:Ga}),o.createElement(l.a,{exact:!0,path:"".concat(t.url,"/UserBadgeDemo"),component:function(){return o.createElement(Za,null)}}),o.createElement(l.a,{exact:!0,path:"".concat(t.url,"/MarkdownSynapseDemo"),component:function(){return o.createElement($a,null)}}),o.createElement(l.a,{exact:!0,path:"".concat(t.url,"/NewsFeedDemo"),component:function(){return o.createElement(nr,null)}}),o.createElement(l.a,{exact:!0,path:t.path,component:function(){return o.createElement("div",null)}}))},rr=function(){return o.createElement(s.a,{basename:"/Synapse-React-Client"},o.createElement("div",null,o.createElement("div",{className:"App-header text-center"},o.createElement("img",{src:d.a,className:"App-logo",alt:"logo"}),o.createElement("h4",{className:"white-text"},"Synapse React Client Demo")),o.createElement("ul",null,o.createElement("li",null,o.createElement(c.a,{to:"/"},"Demo")),o.createElement("li",null,o.createElement(c.a,{to:"/Playground"},"Playground"))),o.createElement(l.a,{exact:!0,path:"/",component:Na}),o.createElement(l.a,{path:"/Playground",component:ar})))};i.render(o.createElement(rr,null),document.getElementById("root"))},66:function(e,t,n){e.exports=n.p+"static/media/project.28806f03.svg"}},[[195,1,2]]]);
//# sourceMappingURL=main.ac14f6b1.chunk.js.map